!function(e){var a;a=function(e){var a,t=navigator.userAgent,n=/iphone/i.test(t),i=/chrome/i.test(t),c=/android/i.test(t);e.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},e.fn.extend({caret:function(e,a){var t;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(a="number"==typeof a?a:e,this.each((function(){this.setSelectionRange?this.setSelectionRange(e,a):this.createTextRange&&((t=this.createTextRange()).collapse(!0),t.moveEnd("character",a),t.moveStart("character",e),t.select())}))):(this[0].setSelectionRange?(e=this[0].selectionStart,a=this[0].selectionEnd):document.selection&&document.selection.createRange&&(t=document.selection.createRange(),e=0-t.duplicate().moveStart("character",-1e5),a=e+t.text.length),{begin:e,end:a})},unmask:function(){return this.trigger("unmask")},mask:function(t,o){var r,l,s,u,f,d,m;if(!t&&this.length>0){var p=e(this[0]).data(e.mask.dataName);return p?p():void 0}return o=e.extend({autoclear:e.mask.autoclear,placeholder:e.mask.placeholder,completed:null},o),r=e.mask.definitions,l=[],s=d=t.length,u=null,e.each(t.split(""),(function(e,a){"?"==a?(d--,s=e):r[a]?(l.push(new RegExp(r[a])),null===u&&(u=l.length-1),s>e&&(f=l.length-1)):l.push(null)})),this.trigger("unmask").each((function(){function p(){if(o.completed){for(var e=u;f>=e;e++)if(l[e]&&j[e]===h(e))return;o.completed.call(x)}}function h(e){return o.placeholder.charAt(e<o.placeholder.length?e:0)}function b(e){for(;++e<d&&!l[e];);return e}function g(e,a){var t,n;if(!(0>e)){for(t=e,n=b(a);d>t;t++)if(l[t]){if(!(d>n&&l[t].test(j[n])))break;j[t]=j[n],j[n]=h(n),n=b(n)}y(),x.caret(Math.max(u,e))}}function k(){w(),x.val()!=C&&x.change()}function v(e,a){var t;for(t=e;a>t&&d>t;t++)l[t]&&(j[t]=h(t))}function y(){x.val(j.join(""))}function w(e){var a,t,n,i=x.val(),c=-1;for(a=0,n=0;d>a;a++)if(l[a]){for(j[a]=h(a);n++<i.length;)if(t=i.charAt(n-1),l[a].test(t)){j[a]=t,c=a;break}if(n>i.length){v(a+1,d);break}}else j[a]===i.charAt(n)&&n++,s>a&&(c=a);return e?y():s>c+1?o.autoclear||j.join("")===T?(x.val()&&x.val(""),v(0,d)):y():(y(),x.val(x.val().substring(0,c+1))),s?a:u}var x=e(this),j=e.map(t.split(""),(function(e,a){return"?"!=e?r[e]?h(a):e:void 0})),T=j.join(""),C=x.val();x.data(e.mask.dataName,(function(){return e.map(j,(function(e,a){return l[a]&&e!=h(a)?e:null})).join("")})),x.one("unmask",(function(){x.off(".mask").removeData(e.mask.dataName)})).on("focus.mask",(function(){var e;x.prop("readonly")||(clearTimeout(a),C=x.val(),e=w(),a=setTimeout((function(){y(),e==t.replace("?","").length?x.caret(0,e):x.caret(e)}),10))})).on("blur.mask",k).on("keydown.mask",(function(e){if(!x.prop("readonly")){var a,t,i,c=e.which||e.keyCode;m=x.val(),8===c||46===c||n&&127===c?(t=(a=x.caret()).begin,(i=a.end)-t==0&&(t=46!==c?function(e){for(;--e>=0&&!l[e];);return e}(t):i=b(t-1),i=46===c?b(i):i),v(t,i),g(t,i-1),e.preventDefault()):13===c?k.call(this,e):27===c&&(x.val(C),x.caret(0,w()),e.preventDefault())}})).on("keypress.mask",(function(a){if(!x.prop("readonly")){var t,n,i,o=a.which||a.keyCode,r=x.caret();a.ctrlKey||a.altKey||a.metaKey||32>o||!o||13===o||(r.end-r.begin!=0&&(v(r.begin,r.end),g(r.begin,r.end-1)),t=b(r.begin-1),d>t&&(n=String.fromCharCode(o),l[t].test(n))&&(function(e){var a,t,n,i;for(a=e,t=h(e);d>a;a++)if(l[a]){if(n=b(a),i=j[a],j[a]=t,!(d>n&&l[n].test(i)))break;t=i}}(t),j[t]=n,y(),i=b(t),c?setTimeout((function(){e.proxy(e.fn.caret,x,i)()}),0):x.caret(i),r.begin<=f&&p()),a.preventDefault())}})).on("input.mask paste.mask",(function(){x.prop("readonly")||setTimeout((function(){var e=w(!0);x.caret(e),p()}),0)})),i&&c&&x.off("input.mask").on("input.mask",(function(){var e=x.val(),a=x.caret();if(e.length<m.length){for(w(!0);a.begin>0&&!l[a.begin-1];)a.begin--;if(0===a.begin)for(;a.begin<u&&!l[a.begin];)a.begin++;x.caret(a.begin,a.begin)}else{for(w(!0);a.begin<d&&!l[a.begin];)a.begin++;x.caret(a.begin,a.begin)}p()})),w()}))}})},"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery),e((function(){var a=e("#redirectsuccesssimplecallback").text(),t={show:function(a,t){a&&e("body > #simplecallback-"+a).length>0&&e(".simplecallback-overlay").fadeIn();var n=a?e("body > #simplecallback-"+a):e("[data-simplecallback-form-overlayed]").first(),i=n.innerHeight(),c=n.find('input[name="simplecallback_custom_data"]');t?c.val(t):c.val(""),n.fadeIn(),n.animate({top:e(window).scrollTop()+(e(window).height()-i)/2})},hide:function(){e('body > [id^="simplecallback-"]').fadeOut(),e(".simplecallback-overlay").fadeOut()}};if(window.simplecallback=t,e("[data-simplecallback-form]").each((function(){var a=e(this).data("simplecallback-phone-mask");a&&e(this).find('[name="simplecallback_phone"]').mask(a)})),e("[data-simplecallback-form]").on("submit",(function(){var n=e(this),i=n.attr("action"),c=n.find(".simplecallback-captcha"),o=n.find('[type="submit"]');return n.addClass("simplecallback-loading"),o.attr("disabled",!0),e.ajax({type:"POST",url:i,dataType:"json",accepts:{text:"application/json"},data:new FormData(this),async:!1,cache:!1,contentType:!1,processData:!1,success:function(e){!1===e.error?(swal({title:"Отлично!",text:e.message,type:"success",timer:3e3,showConfirmButton:!1}),n[0].reset(),t.hide()):swal({title:"Ошибка!",type:"warning",text:e.message,timer:5e3,showConfirmButton:!1}),n.removeClass("simplecallback-loading"),o.attr("disabled",!1),"noturl"!=a&&(window.location.href=a)}}),c.attr("src",c.attr("src")+"?rand="+Math.random()),!1})),e("[data-simplecallback-form-overlayed]").each((function(){e(this).appendTo("body")})),e("[data-simplecallback-form-overlayed]").length>0){var n=e('<div class="simplecallback-overlay">');e("body").prepend(n)}e(document).on("click","[data-simplecallback-open]",(function(){var a=e(this).data("simplecallback-open"),n=e(this).data("simplecallback-custom-data");return t.show(a,n),!1})),e(document).on("click","[data-simplecallback-close]",(function(){return t.hide(),!1})),window.addEventListener("load",(function(e){if(window.location.hash.indexOf("#simplecallback-")>-1){var a=parseInt(window.location.hash.replace(/[^0-9\.]/g,""),10);t.show(a)}}),!1),e(document).on("click",'a[href^="#simplecallback-"]',(function(){var a=parseInt(e(this).attr("href").replace(/[^0-9\.]/g,""),10);return t.show(a),!1}))}))}(jQuery);