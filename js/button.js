!function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n="object"==typeof t&&t&&t.Object===Object&&t,i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")(),r=(i=o.Symbol,function(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}),s=Array.isArray,a=(B=Object.prototype).hasOwnProperty,c=B.toString,l=i?i.toStringTag:void 0,u=function(t){var e=a.call(t,l),n=t[l];try{var i=!(t[l]=void 0)}catch(t){}var o=c.call(t);return i&&(e?t[l]=n:delete t[l]),o},h=Object.prototype.toString,d=function(t){return h.call(t)},p=i?i.toStringTag:void 0,f=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(p&&p in Object(t)?u:d)(t)},m=function(t){return null!=t&&"object"==typeof t},g=function(t){return"symbol"==typeof t||m(t)&&"[object Symbol]"==f(t)},v=(B=i?i.prototype:void 0)?B.toString:void 0,_=function t(e){if("string"==typeof e)return e;if(s(e))return r(e,t)+"";if(g(e))return v?v.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},y=function(t){return null==t?"":_(t)},b=function(t,e,n){var i=t.length;return n=void 0===n?i:n,!e&&i<=n?t:function(t,e,n){for(var i=-1,o=t.length,r=((n=o<n?o:n)<0&&(n+=o),o=n<(e=e<0?o<-e?0:o+e:e)?0:n-e>>>0,e>>>=0,Array(o));++i<o;)r[i]=t[i+e];return r}(t,e,n)},w=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),C=function(t){return w.test(t)},I=function(t){return t.split("")},k="["+(B="\\ud800-\\udfff")+"]",S="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",A="\\ud83c[\\udffb-\\udfff]",O=(O="[\\ufe0e\\ufe0f]?")+(E="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?")+"(?:\\u200d(?:"+[B="[^"+B+"]",W="(?:\\ud83c[\\udde6-\\uddff]){2}",mt="[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+O+E+")*",E="(?:"+[B+S+"?",S,W,mt,k].join("|")+")",x=RegExp(A+"(?="+A+")|"+E+O,"g"),M=function(t){return t.match(x)||[]},L=function(t){return(C(t)?M:I)(t)},T=function(t){t=y(t);var e=(n=C(t)?L(t):void 0)?n[0]:t.charAt(0),n=n?b(n,1).join(""):t.slice(1);return e.toUpperCase()+n},j=function(t,e){for(var n=-1,i=null==t?0:t.length,o=0,r=[];++n<i;){var s=t[n];e(s,n,t)&&(r[o++]=s)}return r},N=function(t,e,n){for(var i=-1,o=Object(t),r=n(t),s=r.length;s--;){var a=r[++i];if(!1===e(o[a],a,o))break}return t},B=function(t){return m(t)&&"[object Arguments]"==f(t)},R=(S=Object.prototype).hasOwnProperty,F=S.propertyIsEnumerable,P=B(function(){return arguments}())?B:function(t){return m(t)&&R.call(t,"callee")&&!F.call(t,"callee")};function H(){return!1}var z=e((function(t,e){var n;e=(n=(n=(e=e&&!e.nodeType&&e)&&t&&!t.nodeType&&t)&&n.exports===e?o.Buffer:void 0)?n.isBuffer:void 0;t.exports=e||H})),D=/^(?:0|[1-9]\d*)$/,U=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&D.test(t))&&-1<t&&t%1==0&&t<e},G=function(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991},V={};V["[object Float32Array]"]=V["[object Float64Array]"]=V["[object Int8Array]"]=V["[object Int16Array]"]=V["[object Int32Array]"]=V["[object Uint8Array]"]=V["[object Uint8ClampedArray]"]=V["[object Uint16Array]"]=V["[object Uint32Array]"]=!0,V["[object Arguments]"]=V["[object Array]"]=V["[object ArrayBuffer]"]=V["[object Boolean]"]=V["[object DataView]"]=V["[object Date]"]=V["[object Error]"]=V["[object Function]"]=V["[object Map]"]=V["[object Number]"]=V["[object Object]"]=V["[object RegExp]"]=V["[object Set]"]=V["[object String]"]=V["[object WeakMap]"]=!1;var W=function(t){return function(e){return t(e)}},K=(k=(mt=e((function(t,e){var i=(e=e&&!e.nodeType&&e)&&t&&!t.nodeType&&t,o=i&&i.exports===e&&n.process;e=function(){try{var t=i&&i.require&&i.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=e})))&&mt.isTypedArray)?W(k):function(t){return m(t)&&G(t.length)&&!!V[f(t)]},Y=Object.prototype.hasOwnProperty,X=function(t,e){var n,i=s(t),o=!i&&P(t),r=!i&&!o&&z(t),a=!i&&!o&&!r&&K(t),c=i||o||r||a,l=c?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],u=l.length;for(n in t)!e&&!Y.call(t,n)||c&&("length"==n||r&&("offset"==n||"parent"==n)||a&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||U(n,u))||l.push(n);return l},q=Object.prototype,J=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||q)},Z=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),$=Object.prototype.hasOwnProperty,Q=function(t){if(!J(t))return Z(t);var e,n=[];for(e in Object(t))$.call(t,e)&&"constructor"!=e&&n.push(e);return n},tt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},et=function(t){return!!tt(t)&&("[object Function]"==(t=f(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)},nt=function(t){return null!=t&&G(t.length)&&!et(t)},it=function(t){return(nt(t)?X:Q)(t)},ot=function(t,e){if(null==t)return t;if(!nt(t))return function(t,e){return t&&N(t,e,it)}(t,e);for(var n=t.length,i=-1,o=Object(t);++i<n&&!1!==e(o[i],i,o););return t};function rt(t,e){var n=[];return ot(t,(function(t,i,o){e(t,i,o)&&n.push(t)})),n}var st=function(t,e){return t===e||t!=t&&e!=e},at=function(t,e){for(var n=t.length;n--;)if(st(t[n][0],e))return n;return-1},ct=Array.prototype.splice;function lt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}lt.prototype.clear=function(){this.__data__=[],this.size=0},lt.prototype.delete=function(t){var e=this.__data__;return!((t=at(e,t))<0||(t==e.length-1?e.pop():ct.call(e,t,1),--this.size,0))},lt.prototype.get=function(t){var e=this.__data__;return(t=at(e,t))<0?void 0:e[t][1]},lt.prototype.has=function(t){return-1<at(this.__data__,t)},lt.prototype.set=function(t,e){var n=this.__data__,i=at(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};var ut=lt;A=o["__core-js_shared__"];var ht=(E=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+E:"",dt=Function.prototype.toString,pt=function(t){if(null!=t){try{return dt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},ft=/^\[object .+?Constructor\]$/,mt=(O=Function.prototype,S=Object.prototype,B=O.toString,S.hasOwnProperty),gt=RegExp("^"+B.call(mt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=function(t){return!(!tt(t)||function(t){return!!ht&&ht in t}(t))&&(et(t)?gt:ft).test(pt(t))},_t=function(t,e){return t=function(t,e){return null==t?void 0:t[e]}(t,e),vt(t)?t:void 0},yt=_t(o,"Map"),bt=_t(Object,"create");var wt=Object.prototype.hasOwnProperty;var Ct=Object.prototype.hasOwnProperty;function It(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}It.prototype.clear=function(){this.__data__=bt?bt(null):{},this.size=0},It.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},It.prototype.get=function(t){var e,n=this.__data__;return bt?"__lodash_hash_undefined__"===(e=n[t])?void 0:e:wt.call(n,t)?n[t]:void 0},It.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:Ct.call(e,t)},It.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=bt&&void 0===e?"__lodash_hash_undefined__":e,this};var kt=It,St=function(t,e){return t=t.__data__,function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?t["string"==typeof e?"string":"hash"]:t.map};function At(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}At.prototype.clear=function(){this.size=0,this.__data__={hash:new kt,map:new(yt||ut),string:new kt}},At.prototype.delete=function(t){return t=St(this,t).delete(t),this.size-=t?1:0,t},At.prototype.get=function(t){return St(this,t).get(t)},At.prototype.has=function(t){return St(this,t).has(t)},At.prototype.set=function(t,e){var n=St(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};var Ot=At;function Et(t){t=this.__data__=new ut(t),this.size=t.size}Et.prototype.clear=function(){this.__data__=new ut,this.size=0},Et.prototype.delete=function(t){var e=this.__data__;return t=e.delete(t),this.size=e.size,t},Et.prototype.get=function(t){return this.__data__.get(t)},Et.prototype.has=function(t){return this.__data__.has(t)},Et.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ut){var i=n.__data__;if(!yt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ot(i)}return n.set(t,e),this.size=n.size,this};var xt=Et;function Mt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Ot;++e<n;)this.add(t[e])}Mt.prototype.add=Mt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Mt.prototype.has=function(t){return this.__data__.has(t)};var Lt=Mt,Tt=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},jt=function(t,e){return t.has(e)},Nt=function(t,e,n,i,o,r){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&a<c))return!1;if((c=r.get(t))&&r.get(e))return c==e;var l=-1,u=!0,h=2&n?new Lt:void 0;for(r.set(t,e),r.set(e,t);++l<a;){var d,p=t[l],f=e[l];if(void 0!==(d=i?s?i(f,p,l,e,t,r):i(p,f,l,t,e,r):d)){if(d)continue;u=!1;break}if(h){if(!Tt(e,(function(t,e){if(!jt(h,e)&&(p===t||o(p,t,n,i,r)))return h.push(e)}))){u=!1;break}}else if(p!==f&&!o(p,f,n,i,r)){u=!1;break}}return r.delete(t),r.delete(e),u},Bt=o.Uint8Array;function Rt(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function Ft(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Pt=(W=i?i.prototype:void 0)?W.valueOf:void 0,Ht=function(t,e){for(var n=-1,i=e.length,o=t.length;++n<i;)t[o+n]=e[n];return t},zt=Object.prototype.propertyIsEnumerable,Dt=Object.getOwnPropertySymbols,Ut=Dt?function(t){return null==t?[]:(t=Object(t),j(Dt(t),(function(e){return zt.call(t,e)})))}:function(){return[]},Gt=function(t){return function(t,e,n){return e=e(t),s(t)?e:Ht(e,n(t))}(t,it,Ut)},Vt=Object.prototype.hasOwnProperty,Wt=(k=_t(o,"DataView"),A=_t(o,"Promise"),E=_t(o,"Set"),O=_t(o,"WeakMap"),"[object Map]"),Kt="[object Promise]",Yt="[object Set]",Xt="[object WeakMap]",qt="[object DataView]",Jt=pt(k),Zt=pt(yt),$t=pt(A),Qt=pt(E),te=pt(O),ee=(S=f,S=k&&S(new k(new ArrayBuffer(1)))!=qt||yt&&S(new yt)!=Wt||A&&S(A.resolve())!=Kt||E&&S(new E)!=Yt||O&&S(new O)!=Xt?function(t){var e=f(t);if(t=(t="[object Object]"==e?t.constructor:void 0)?pt(t):"")switch(t){case Jt:return qt;case Zt:return Wt;case $t:return Kt;case Qt:return Yt;case te:return Xt}return e}:S),ne="[object Arguments]",ie="[object Array]",oe="[object Object]",re=Object.prototype.hasOwnProperty,se=function(t,e,n,i,o,r){var a=s(t),c=s(e),l=a?ie:ee(t),u=(c=c?ie:ee(e),(l=l==ne?oe:l)==oe),h=(c=c==ne?oe:c)==oe;if((c=l==c)&&z(t)){if(!z(e))return!1;u=!(a=!0)}return c&&!u?(r=r||new xt,a||K(t)?Nt(t,e,n,i,o,r):function(t,e,n,i,o,r,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!r(new Bt(t),new Bt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return st(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Rt;case"[object Set]":if(a=a||Ft,t.size!=e.size&&!(1&i))return!1;var c=s.get(t);return c?c==e:(i|=2,s.set(t,e),c=Nt(a(t),a(e),i,o,r,s),s.delete(t),c);case"[object Symbol]":if(Pt)return Pt.call(t)==Pt.call(e)}return!1}(t,e,l,n,i,o,r)):1&n||(a=u&&re.call(t,"__wrapped__"),l=h&&re.call(e,"__wrapped__"),!a&&!l)?!!c&&function(t,e,n,i,o,r){var s=1&n,a=Gt(t),c=a.length;if(c!=Gt(e).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in e:Vt.call(e,u)))return!1}var h=r.get(t);if(h&&r.get(e))return h==e;for(var d,p=!0,f=(r.set(t,e),r.set(e,t),s);++l<c;){var m,g=t[u=a[l]],v=e[u];if(!(void 0===(m=i?s?i(v,g,u,e,t,r):i(g,v,u,t,e,r):m)?g===v||o(g,v,n,i,r):m)){p=!1;break}f=f||"constructor"==u}return p&&!f&&(h=t.constructor)!=(d=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof h&&h instanceof h&&"function"==typeof d&&d instanceof d)&&(p=!1),r.delete(t),r.delete(e),p}(t,e,n,i,o,r=r||new xt):o(a?t.value():t,l?e.value():e,n,i,r=r||new xt)},ae=function t(e,n,i,o,r){return e===n||(null==e||null==n||!m(e)&&!m(n)?e!=e&&n!=n:se(e,n,i,o,t,r))},ce=function(t){return t==t&&!tt(t)},le=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},ue=function(t){var e=function(t){for(var e=it(t),n=e.length;n--;){var i=e[n],o=t[i];e[n]=[i,o,ce(o)]}return e}(t);return 1==e.length&&e[0][2]?le(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,i){var o=n.length,r=o,s=!i;if(null==t)return!r;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<r;){var c=(a=n[o])[0],l=t[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in t))return!1}else{var h,d=new xt;if(!(void 0===(h=i?i(l,u,c,t,e,d):h)?ae(u,l,3,i,d):h))return!1}}return!0}(n,t,e)}},he=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,de=/^\w*$/,pe=function(t,e){if(s(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!g(t))||de.test(t)||!he.test(t)||null!=e&&t in Object(e)};function fe(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");function n(){var i=arguments,o=e?e.apply(this,i):i[0],r=n.cache;return r.has(o)?r.get(o):(i=t.apply(this,i),n.cache=r.set(o,i)||r,i)}return n.cache=new(fe.Cache||Ot),n}fe.Cache=Ot;var me=fe,ge=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ve=/\\(\\)?/g,_e=function(t){var e=(t=me(t,(function(t){return 500===e.size&&e.clear(),t}))).cache;return t}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ge,(function(t,n,i,o){e.push(i?o.replace(ve,"$1"):n||t)})),e})),ye=function(t,e){return s(t)?t:pe(t,e)?[t]:_e(y(t))},be=function(t){if("string"==typeof t||g(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},we=function(t,e){for(var n=0,i=(e=ye(e,t)).length;null!=t&&n<i;)t=t[be(e[n++])];return n&&n==i?t:void 0};function Ce(t,e){return null!=t&&e in Object(t)}var Ie=function(t,e){return null!=t&&function(t,e,n){for(var i=-1,o=(e=ye(e,t)).length,r=!1;++i<o;){var a=be(e[i]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}return r||++i!=o?r:!!(o=null==t?0:t.length)&&G(o)&&U(a,o)&&(s(t)||P(t))}(t,e,Ce)},ke=function(t,e){return pe(t)&&ce(e)?le(be(t),e):function(n){var i=function(t,e,n){return void 0===(t=null==t?void 0:we(t,e))?n:t}(n,t);return void 0===i&&i===e?Ie(n,t):ae(e,i,3)}};function Se(t){return t}var Ae=function(t){return pe(t)?function(t){return function(e){return null==e?void 0:e[t]}}(be(t)):function(t){return function(e){return we(e,t)}}(t)},Oe=function(t){return"function"==typeof t?t:null==t?Se:"object"==typeof t?s(t)?ke(t[0],t[1]):ue(t):Ae(t)};function Ee(){return Le.promo}var xe=function(t,e){return(s(t)?j:rt)(t,function(t){if("function"!=typeof t)throw new TypeError("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}(Oe(e)))},Me=e((function(e,n){var i=t,o=n&&!n.nodeType&&n,r=(n=e&&!e.nodeType&&e,"object"==typeof t&&t);r.global!==r&&r.window!==r&&r.self!==r||(i=r);var s,a,c=2147483647,l=36,u=/^xn--/,h=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(t){throw new RangeError(p[t])}function v(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}function _(t,e){var n="",i=(1<(i=t.split("@")).length&&(n=i[0]+"@",t=i[1]),(t=t.replace(d,".")).split("."));return n+v(i,e).join(".")}function y(t){for(var e,n,i=[],o=0,r=t.length;o<r;)55296<=(e=t.charCodeAt(o++))&&e<=56319&&o<r?56320==(64512&(n=t.charCodeAt(o++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),o--):i.push(e);return i}function b(t){return v(t,(function(t){var e="";return 65535<t&&(e+=m((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+m(t)})).join("")}function w(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function C(t,e,n){var i=0;for(t=n?f(t/700):t>>1,t+=f(t/e);455<t;i+=l)t=f(t/35);return f(i+36*t/(t+38))}function I(t){var e,n,i,o,r,s,a,u=[],h=t.length,d=0,p=128,m=72,v=t.lastIndexOf("-");for(v<0&&(v=0),n=0;n<v;++n)128<=t.charCodeAt(n)&&g("not-basic"),u.push(t.charCodeAt(n));for(i=0<v?v+1:0;i<h;){for(o=d,r=1,s=l;h<=i&&g("invalid-input"),a=t.charCodeAt(i++),(l<=(a=a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:l)||a>f((c-d)/r))&&g("overflow"),d+=a*r,!(a<(a=s<=m?1:m+26<=s?26:s-m));s+=l)r>f(c/(a=l-a))&&g("overflow"),r*=a;m=C(d-o,e=u.length+1,0==o),f(d/e)>c-p&&g("overflow"),p+=f(d/e),d%=e,u.splice(d++,0,p)}return b(u)}function k(t){for(var e,n,i,o,r,s,a,u,h,d,p=[],v=(t=y(t)).length,_=128,b=72,I=e=0;I<v;++I)(a=t[I])<128&&p.push(m(a));for(n=i=p.length,i&&p.push("-");n<v;){for(o=c,I=0;I<v;++I)_<=(a=t[I])&&a<o&&(o=a);for(o-_>f((c-e)/(u=n+1))&&g("overflow"),e+=(o-_)*u,_=o,I=0;I<v;++I)if((a=t[I])<_&&++e>c&&g("overflow"),a==_){for(r=e,s=l;!(r<(h=s<=b?1:b+26<=s?26:s-b));s+=l)p.push(m(w(h+(d=r-h)%(h=l-h),0))),r=f(d/h);p.push(m(w(r,0))),b=C(e,u,n==i),e=0,++n}++e,++_}return p.join("")}if(s={version:"1.4.1",ucs2:{decode:y,encode:b},decode:I,encode:k,toASCII:function(t){return _(t,(function(t){return h.test(t)?"xn--"+k(t):t}))},toUnicode:function(t){return _(t,(function(t){return u.test(t)?I(t.slice(4).toLowerCase()):t}))}},o&&n)if(e.exports==o)n.exports=s;else for(a in s)s.hasOwnProperty(a)&&(o[a]=s[a]);else i.punycode=s})),Le={gso:"",forms:"",button:"",promo:""};function Te(t){return Ne(window[t])?null:window[t]}function je(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];Re[t]&&Re[t].forEach((function(t){return t.apply({},e)}))}var Ne=function(t){return void 0===t},Be="amocrm_applebm",Re={},Fe=!1,Pe=[],He=["runChatShutdown","runChatShow","runChatHide","runDestroy","sendKeyActionHook","setupContactForHuman"],ze=function(t,e){for(var n=[],i=arguments.length-2;0<i--;)n[i]=arguments[i+2];var o=t("livechat"),r=t("keyactions"),s=t("button");if(!Fe&&-1<He.indexOf(e))Pe.push(arguments);else switch(e){case"onChatShow":case"onChatRenderDone":case"onChatHide":case"onChatMessage":case"onChatReady":case"onChatShutdown":case"onButtonClick":case"onConversationsChange":(function(t,e){Re[t]||(Re[t]=[]),Re[t].push(e)}).apply(null,[e].concat(n));break;case"runChatShutdown":o&&o.shutdown();break;case"runChatShow":o&&o.show();break;case"runChatHide":o&&o.hide();break;case"runDestroy":s&&s.destroy();break;case"sendKeyActionHook":r&&r.reachHook(n[0]);break;case"setupContactForHuman":s&&s.setupContactForHuman(n[0])}};B=function(t){return function(e,n,i){var o,r=Object(e);return-1<(n=(nt(e)||(o=Oe(n),e=it(e),n=function(t){return o(r[t],t,r)}),t(e,n,i)))?r[o?e[n]:n]:void 0}};var De=/^\s+|\s+$/g,Ue=/^[-+]0x[0-9a-f]+$/i,Ge=/^0b[01]+$/i,Ve=/^0o[0-7]+$/i,We=parseInt,Ke=function(t){if("number"==typeof t)return t;if(g(t))return NaN;if(tt(t)&&(e="function"==typeof t.valueOf?t.valueOf():t,t=tt(e)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=t.replace(De,"");var e=Ge.test(t);return e||Ve.test(t)?We(t.slice(2),e?2:8):Ue.test(t)?NaN:+t},Ye=function(t){var e=(t=function(t){return t?(t=Ke(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t))%1;return t==t?e?t-e:t:0},Xe=Math.max,qe=B((function(t,e,n){var i=null==t?0:t.length;return i?((n=null==n?0:Ye(n))<0&&(n=Xe(i+n,0)),function(t,e,n,i){for(var o=t.length,r=n+(i?1:-1);i?r--:++r<o;)if(e(t[r],r,t))return r;return-1}(t,Oe(e),n)):-1})),Je=0;function Ze(t){return window.addEventListener?!$e||(console.error("Cannot "+t+" event. EventController is stopped."),!1):(console.error("addEventListener is not available."),!1)}var $e=!1,Qe={},tn={add:function(t){var e=t.target,n=t.eventName;t=t.handler;if(!Ze("add"))return!1;if(Boolean(qe(Qe,{target:e,eventName:n,handler:t})))return!1;e.addEventListener(n,t);var i=function(t){var e=++Je;return y(t)+e}("event_");return Qe[i]={target:e,eventName:n,handler:t},i},remove:function(t){if(!Ze("remove"))return!1;if("string"==typeof t){if(!(i=Qe[t]))return console.error("There is no event with that token:",t),!1;var e=i.target,n=i.eventName,i=i.handler;return e.removeEventListener(n,i),delete Qe[t],!0}var o,r=!1,s=t.target,a=t.eventName,c=t.handler;for(o in Qe){var l=Qe[o];if(s===l.target&&a===l.eventName&&c===l.handler){s.removeEventListener(a,c),delete Qe[o],r=!0;break}}return r},removeAll:function(){var t,e=!1;for(t in Qe){var n=this.remove(t);e=e||n}return e},stop:function(){$e=!0}},en=Object.prototype.hasOwnProperty;function nn(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function on(t,e){var n=Number.parseFloat(t.style.right);n&&t.style.setProperty("right",n+e+"px")}function rn(t){ln=window.innerWidth-document.documentElement.clientWidth,un=document.body.style.getPropertyValue("overflow"),document.body.style.setProperty("overflow","hidden"),ln&&(document.documentElement.style.setProperty("margin-right",ln+"px"),cn(t,(function(t){on(t,ln)})))}function sn(t){un?(document.body.style.setProperty("overflow",un),un=null):document.body.style.removeProperty("overflow"),ln&&(document.documentElement.style.removeProperty("margin-right"),cn(t,(function(t){on(t,-ln)})))}function an(t){var e=t.button_holder;t=t.amoforms_url;this.button_holder=e,this.amoforms_url=t,this.is_loading=!1,this.waiting_to_show={},this.handleWindowMessageBound=this.handleWindowMessage.bind(this)}var cn=function(t,e){return(s(t)?nn:ot)(t,function(t){return"function"==typeof t?t:Se}(e))},ln=0,un=null;an.prototype.show=function(t){var e=t.id;t=t.hash;this.is_loading?this.waiting={id:e,hash:t}:(void 0!==window.amo_forms_params&&(this.buffer_amo_forms_params=Object.assign({},window.amo_forms_params)),this.hide(),window.amo_forms_params={id:e,hash:t,locale:"ru"},tn.add({target:window,eventName:"message",handler:this.handleWindowMessageBound}),this.modal=document.createElement("div"),this.script=document.createElement("script"),e=document.createElement("div"),t=document.createElement("span"),this.modal.style="\n      position: fixed;\n      z-index: 2147483647;\n      background: rgba(0,0,0,.4);\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom:0;\n      opacity: 0;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      -webkit-box-pack: center;\n      -ms-flex-pack: center;\n      justify-content: center;\n      overflow: auto;\n    ",tn.add({target:this.modal,eventName:"click",handler:this.hide.bind(this)}),e.style="\n      position: relative;\n      margin: auto;\n      width: calc(100% - 90px);\n      padding-top: 40px;\n    ",tn.add({target:e,eventName:"click",handler:function(t){return t.stopPropagation()}}),t.style="\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n      -ms-flex-align: center;\n      align-items: center;\n      -webkit-box-pack: center;\n      -ms-flex-pack: center;\n      justify-content: center;\n      position: absolute;\n      top: 0;\n      left: 100%;\n      height: 60px;\n      width: 43px;\n      background: none;\n      border: none;\n      padding: 0;\n      cursor: pointer;\n    ",t.innerHTML='\n      <svg width="15" height="16" viewBox="0 0 15 16" xmlns="http://www.w3.org/2000/svg">\n        <path fill="#fff" fill-rule="evenodd" clip-rule="evenodd" d="M7.49998 9.63673L1.97906 15.1577C1.52604 15.6107 0.791253 15.6127 0.339281 15.1607C-0.115843 14.7056 -0.111341 13.9746 0.342318 13.5209L5.86324 8L0.342318 2.47906C-0.110696 2.02604 -0.112692 1.29124 0.339281 0.839272C0.794404 0.384148 1.5254 0.388668 1.97906 0.842327L7.49998 6.36326L13.0209 0.842327C13.474 0.389313 14.2087 0.387299 14.6607 0.839272C15.1158 1.2944 15.1113 2.0254 14.6577 2.47906L9.13672 8L14.6577 13.5209C15.1107 13.974 15.1127 14.7088 14.6607 15.1607C14.2056 15.6159 13.4746 15.6113 13.0209 15.1577L7.49998 9.63673Z" />\n      </svg>\n    ',tn.add({target:t,eventName:"click",handler:this.hide.bind(this)}),this.script.id="amoforms_script",this.script.src=this.amoforms_url,e.appendChild(this.script),e.appendChild(t),this.modal.appendChild(e),document.body.appendChild(this.modal),rn([this.button_holder]),this.is_loading=!0)},an.prototype.hide=function(){this.modal&&(this.modal&&this.modal.parentNode.removeChild(this.modal),this.script&&this.script.parentNode.removeChild(this.script),window.removeEventListener("message",this.handleWindowMessageBound),void 0!==this.buffer_amo_forms_params?(window.amo_forms_params=Object.assign({},this.buffer_amo_forms_params),delete this.buffer_amo_forms_params):delete window.amo_forms_params,sn([this.button_holder]),this.modal=null)},an.prototype.handleWindowMessage=function(t){var e=this,n=null;try{n=JSON.parse(t.data)}catch(t){n=null}if(n&&tt(n))switch(n.func){case"resizeForm":var i=document.getElementById(n.iframe_id);setTimeout((function(){if(e.is_loading=!1,!function(t){if(null==t)return!0;if(nt(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||z(t)||K(t)||P(t)))return!t.length;var e,n=ee(t);if("[object Map]"==n||"[object Set]"==n)return!t.size;if(J(t))return!Q(t).length;for(e in t)if(en.call(t,e))return!1;return!0}(e.waiting))return e.show(e.waiting),void(e.waiting={});i.style.position="relative",n.max_width&&(i.parentNode.style.maxWidth=n.max_width+"px"),e.modal.style.opacity=1}));break;case"amoformsSuccessSubmit":setTimeout((function(){return e.hide()}),1e3)}};var hn=function(t){return null==t?[]:function(t,e){return r(e,(function(e){return t[e]}))}(t,it(t))},dn=function(){try{var t=_t(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),pn=function(t,e,n){"__proto__"==e&&dn?dn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},fn=Object.prototype.hasOwnProperty,mn=function(t,e,n){var i=t[e];fn.call(t,e)&&st(i,n)&&(void 0!==n||e in t)||pn(t,e,n)},gn=function(t,e,n,i){if(!tt(t))return t;for(var o=-1,r=(e=ye(e,t)).length,s=r-1,a=t;null!=a&&++o<r;){var c,l=be(e[o]),u=n;o!=s&&(c=a[l],void 0===(u=i?i(c,l,a):void 0)&&(u=tt(c)?c:U(e[o+1])?[]:{})),mn(a,l,u),a=a[l]}return t},vn=function(t,e){return function(t,e,n){for(var i=-1,o=e.length,r={};++i<o;){var s=e[i],a=we(t,s);n(a,s)&&gn(r,ye(s,t),a)}return r}(t,e,(function(e,n){return Ie(t,n)}))},_n=i?i.isConcatSpreadable:void 0;function yn(t){return s(t)||P(t)||!!(_n&&t&&t[_n])}var bn=function t(e,n,i,o,r){var s=-1,a=e.length;for(i=i||yn,r=r||[];++s<a;){var c=e[s];0<n&&i(c)?1<n?t(c,n-1,i,o,r):Ht(r,c):o||(r[r.length]=c)}return r};function wn(t){return null!=t&&t.length?bn(t,1):[]}var Cn=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},In=Math.max,kn=function(t,e,n){return e=In(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,r=In(i.length-e,0),s=Array(r);++o<r;)s[o]=i[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=i[o];return a[e]=n(s),Cn(t,this,a)}},Sn=function(t){return function(){return t}},An=Date.now,On=function(t){var e=0,n=0;return function(){var i=An(),o=16-(i-n);if(n=i,0<o){if(800<=++e)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(dn?function(t,e){return dn(t,"toString",{configurable:!0,enumerable:!1,value:Sn(e),writable:!0})}:Se);function En(t){t=t||21;for(var e="",n=Ln.getRandomValues(new Uint8Array(t));t--;)e+=Tn[63&n[t]];return e}var xn=function(t){return On(kn(t,void 0,wn),t+"")}((function(t,e){return null==t?{}:vn(t,e)})),Mn=e((function(t,e){var n;n=function(){function t(){for(var t=arguments,e=0,n={};e<arguments.length;e++){var i,o=t[e];for(i in o)n[i]=o[i]}return n}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(i){function o(){}function r(e,n,r){if("undefined"!=typeof document){"number"==typeof(r=t({path:"/"},o.defaults,r)).expires&&(r.expires=new Date(+new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(e){}n=i.write?i.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a,c="";for(a in r)r[a]&&(c+="; "+a,!0!==r[a]&&(c+="="+r[a].split(";")[0]));return document.cookie=e+"="+n+c}}function s(t,n){if("undefined"!=typeof document){for(var o={},r=document.cookie?document.cookie.split("; "):[],s=0;s<r.length;s++){var a=r[s].split("="),c=a.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=e(a[0]);c=(i.read||i)(c,l)||e(c);if(n)try{c=JSON.parse(c)}catch(t){}if(o[l]=c,t===l)break}catch(t){}}return t?o[t]:o}}return o.set=r,o.get=function(t){return s(t,!1)},o.getJSON=function(t){return s(t,!0)},o.remove=function(e,n){r(e,"",t(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))},t.exports=n()})),Ln=self.crypto||self.msCrypto,Tn="Uint8ArdomValuesObj012345679BCDEFGHIJKLMNPQRSTWXYZ_cfghkpqvwxyz-",jn=function(){return o.Date.now()},Nn=Math.max,Bn=Math.min;function Rn(t,e){var n=this,i=parseFloat(sessionStorage.getItem("amo_social_button_tracking_time"))||0;if(this.scrollParams={scrolled_unit:t.scrolled_unit,scrolled_value:parseInt(t.scrolled_value)},t&&"Y"===t.enabled&&t.message){var o=parseInt(t.frequency);this.onShow=e.bind(this),this.displayGreeting=this.displayGreeting.bind(this),this.displayGreetingOnScrollListener=this.displayGreetingOnScrollListener.bind(this);var r=i<(r=1e3*t.timeout)?r-i:r;if(2!==o||"true"!==sessionStorage.getItem(Pn))if(3===o)this.checkFrequencyDay();else switch(this.scrollParams.scrolled_value&&this.afterScrollGreeting(),!0){case this.pageCompare(t):case this.hitsCompare(t):this.displayGreeting();break;default:this.timeout=setTimeout((function(){return n.displayGreeting()}),r)}}}var Fn=function(t,e,n){var i,o,r,s,a,c,l=0,u=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=i,r=o;return i=o=void 0,l=e,s=t.apply(r,n)}function f(t){var n=t-c;return void 0===c||e<=n||n<0||h&&r<=t-l}function m(){var t,n=jn();if(f(n))return g(n);a=setTimeout(m,(t=e-((n=n)-c),h?Bn(t,r-(n-l)):t))}function g(t){return a=void 0,d&&i?p(t):(i=o=void 0,s)}function v(){var t=jn(),n=f(t);if(i=arguments,o=this,c=t,n){if(void 0===a)return l=t=c,a=setTimeout(m,e),u?p(t):s;if(h)return clearTimeout(a),a=setTimeout(m,e),p(c)}return void 0===a&&(a=setTimeout(m,e)),s}return e=Ke(e)||0,tt(n)&&(u=!!n.leading,r=(h="maxWait"in n)?Nn(Ke(n.maxWait)||0,e):r,d="trailing"in n?!!n.trailing:d),v.cancel=function(){void 0!==a&&clearTimeout(a),i=c=o=a=void(l=0)},v.flush=function(){return void 0===a?s:g(jn())},v},Pn="amo_social_button_banner_shown_at";Rn.prototype.destroy=function(){this.scrollParams.scrolled_value&&tn.remove({target:window,eventName:"scroll",handler:this.debouncedDisplayGreetingOnScrollListener}),clearTimeout(this.timeout)},Rn.prototype.displayGreetingOnScrollListener=function(t){var e=(n=this.scrollParams).scrolled_unit,n=n.scrolled_value,i=window.innerHeight*(window.innerHeight/document.documentElement.scrollHeight);e="%"===e?document.documentElement.scrollHeight*n/100:n;window.pageYOffset+i>=i+e&&(this.scrollParams.is_scroll="N",this.displayGreeting())},Rn.prototype.afterScrollGreeting=function(){this.debouncedDisplayGreetingOnScrollListener=Fn(this.displayGreetingOnScrollListener,100),tn.add({target:window,eventName:"scroll",handler:this.debouncedDisplayGreetingOnScrollListener}),this.displayGreetingOnScrollListener()},Rn.prototype.checkFrequencyDay=function(){var t=this,e=(parseInt(localStorage.getItem(Pn))||0)+864e5;Date.now()<e?(e-=Date.now())/1e3<900&&(this.timeout=setTimeout((function(){return t.checkFrequencyDay()}),e)):this.displayGreeting()},Rn.prototype.pageCompare=function(t){var e=window.location.pathname;t=t.page||{value:"",mask:1};return this.compareWithMask(e,t.value,t.mask)},Rn.prototype.compareWithMask=function(t,e,n){var i=!1;switch(t=t.toString(),e=e.toString(),parseInt(n)){case 1:i=t===e;break;case 2:i=t!==e;break;case 3:i=t.startsWith(e);break;case 4:i=t.endsWith(e);break;case 5:i=t.includes(e);break;case 6:i=!t.includes(e)}return i},Rn.prototype.hitsCompare=function(t){var e=parseInt(sessionStorage.getItem("amo_social_button_tracking_hits"))||0;t=parseInt(t.hits)||0;return 0!==e&&0!==t&&t<=e},Rn.prototype.displayGreeting=function(){this.onShow(),localStorage.setItem(Pn,Date.now().toString()),sessionStorage.setItem(Pn,"true"),this.destroy()};mt=function(t){return function(t,e){return On(kn(t,e,Se),t+"")}((function(e,n){var i=-1,o=n.length,r=1<o?n[o-1]:void 0,s=2<o?n[2]:void 0;r=3<t.length&&"function"==typeof r?(o--,r):void 0;for(s&&function(t,e,n){if(!tt(n))return!1;var i=typeof e;return!!("number"==i?nt(n)&&U(e,n.length):"string"==i&&e in n)&&st(n[e],t)}(n[0],n[1],s)&&(r=o<3?void 0:r,o=1),e=Object(e);++i<o;){var a=n[i];a&&t(e,a,i,r)}return e}))};var Hn=Object.prototype.hasOwnProperty,zn=mt((function(t,e){if(J(e)||nt(e))!function(t,e,n,i){for(var o=!n,r=(n=n||{},-1),s=e.length;++r<s;){var a=e[r],c=i?i(n[a],t[a],a,n,t):void 0;void 0===c&&(c=t[a]),(o?pn:mn)(n,a,c)}}(e,it(e),t);else for(var n in e)Hn.call(e,n)&&mn(t,n,e[n])}));Dn="AMO_LIVECHAT_IFRAME";var Dn,Un,Gn=function(t){window.parent.postMessage(JSON.stringify(tt(t)?zn({},t,{origin:Te(Dn)}):t),"*")},Vn={Conversation:"Беседа",Conversations:"Список бесед",Today:"Сегодня",Yesterday:"Вчера","Show all":"Показать все","Create new conversation":"Создать новую беседу",You:"Вы"},Wn={Conversation:"Conversation",Conversations:"Conversations",Today:"Today",Yesterday:"Yesterday","Show all":"Show all","Create new conversation":"Create new conversation",You:"You"},Kn={Conversation:"Conversación",Conversations:"Conversaciones",Today:"Hoy",Yesterday:"Ayer","Show all":"Mostrar todo","Create new conversation":"Crear nueva conversación",You:"Tú:"},Yn={Conversation:"Conversa",Conversations:"Conversas",Today:"Hoje",Yesterday:"Ontem","Show all":"Mostrar tudo","Create new conversation":"Criar nova conversa",You:"Você"};function Xn(t){var e;switch(Un){case"ru":e=Vn;break;case"es":e=Kn;break;case"pt":e=Yn;break;default:e=Wn}return e&&e[t]||t}function qn(t){var e=t.context,n=t.conversations,i=t.selectorWrapper,o=t.onOpenAllClick,r=(void 0===o&&(o=function(){}),t.onSelectorToggle),s=(void 0===r&&(r=function(){}),t.onConversationClick);void 0===s&&(s=function(){}),void 0===(t=t.onAddConversationClick)&&(t=function(){}),this.view=i,this.context=e,this.isSelectorOpened=!0,this.isBlockedCloseSelector=!0,this.isOpenedAll=!1,this.firstRender=!0,this.parentHeight=0,this.conversations=n||[],this.selectedConversation="",this.onOpenAllClick=o,this.onSelectorToggle=r,this.onConversationClick=s,this.onAddConversationClick=t,this.triggerOnConversationsChange(),this.initMediaMatcher()}function Jn(t){this.props=t=void 0===t?{}:t;var e=(t=this.props).config;t=t.brandName,this.brandName=t,t=0<=["widget","frame"].indexOf(e.mode)?e.mode:"widget";this.chatContainer=null,"frame"===e.mode&&e.container&&document.querySelector(e.container)&&(t="frame",this.chatContainer=document.querySelector(e.container)),this.mode=t,this.userData=e.params||{},this.userProfile=xn(e.profile,["name","email","phone","avatar"]),this.locale=e.locale||null,this.theme=e.theme||null,e.user_id&&(this.custom_user_id=e.user_id),this.isEnabled=this.props.enabled,this.isActive=!1,this.isInited=!1,this.isInline=this.props.isInline,this.isGreetingAwaited=!1,this.areKeyactionsActive=this.props.has_keyactions,this.hasGreetingReaction=this.props.has_greeting_reaction,this.name="amo-livechat-iframe-"+En(8),this.activeClassName=this.name+"-active",this.socialServiceSize=this.props.serviceSize||50,this.socialServiceSizeWithMargin=this.socialServiceSize+4,this.servicesCount=this.props.servicesCount,this.indexLivechatInChats=this.props.indexLivechatInChats,this.handleWindowResize=this.handleWindowResize.bind(this),this.handleBusMessage=this.handleBusMessage.bind(this),tn.add({target:window,eventName:"message",handler:this.handleBusMessage}),this.iframe_wrapper=this.setupIframe()}function Zn(){}function $n(t){var e=t.keyactions,n=(void 0===e&&(e=[]),t.sendCRMReactions),i=(void 0===n&&(n=Zn),t.showAnimation),o=(void 0===i&&(i=Zn),t.showForm);void 0===o&&(o=Zn),void 0===(t=t.showGreeting)&&(t=Zn),this.reached={},this.conditions={},this.reactions={},this.constraintTimeouts={},this.conditionTimeouts={},this.sendCRMReactions=n,this.showAnimation=i,this.showForm=o,this.showGreeting=t,this.parse(e),this.run()}function Qn(t){this.props=t=void 0===t?{}:t,t=this.props.brandName,this.brandName=t,this.initModalIframe()}function ti(){return Array.prototype.slice.call(document.all).reduce((function(t,e){return Math.max(t,+window.getComputedStyle(e).zIndex||0)}),0)}W={isMobile:{configurable:!0},selectedConversationId:{configurable:!0},shouldOpenSelector:{configurable:!0},isOpenedAll:{configurable:!0}};var ei=(qn.prototype.getSelectors=function(){return{selector:".conversation-selector",header:".conversation-selector__header",mobileHeader:".conversation-selector__header--mobile",closeMobile:".conversation-selector__header-close",conversationsWrapper:".conversation-selector__conversations",openAll:".conversation-selector__open-all",addConversation:".conversation-selector__add-button",headerIcon:".conversation-selector__header-icon",conversationItem:".conversation-selector__item"}},qn.prototype.getConversationTemplate=function(t){var e=t.id,n=t.name,i=t.date,o=t.author,r=t.message;return'\n      <div class="conversation-selector__item '+(t.selected?"selected":"")+'" data-id="'+e+'">\n        <div class="conversation-selector__item-wrapper">\n          <div class="conversation-selector__item-header">\n          <div class="conversation-selector__name-wrapper">\n            <span>'+Xn("Conversation")+'</span>\n            <span class="conversation-selector__conversation-id">\n              '+n+'\n            </span>\n          </div>\n          <div class="conversation-selector__item-header-date">\n            '+i+'\n          </div>\n        </div>\n        <div class="conversation-selector__item-message">\n          '+o+": "+r+"\n        </div>\n        </div>\n      </div>\n    "},qn.prototype.getSelectorTemplate=function(){return'\n      <div class="conversation-selector">\n        <div class="conversation-selector__inner">\n          <div class="conversation-selector__header">\n            <div class="conversation-selector__header-text">'+Xn("Conversations")+'</div>\n\n            <div class="conversation-selector__header-icon">\n              <svg xmlns="http://www.w3.org/2000/svg" width="12" height="7" viewBox="0 0 12 7" fill="none">\n                <path d="M10.2929 0.292892C10.6834 -0.0976314 11.3166 -0.0976315 11.7071 0.292892C12.0976 0.683417 12.0976 1.31658 11.7071 1.70711L10.2929 0.292892ZM6 6L6.70711 6.70711C6.51957 6.89464 6.26522 7 6 7C5.73478 7 5.48043 6.89464 5.29289 6.70711L6 6ZM0.292893 1.70711C-0.0976316 1.31658 -0.0976317 0.683417 0.292893 0.292893C0.683417 -0.0976309 1.31658 -0.097631 1.70711 0.292893L0.292893 1.70711ZM11.7071 1.70711L6.70711 6.70711L5.29289 5.29289L10.2929 0.292892L11.7071 1.70711ZM5.29289 6.70711L0.292893 1.70711L1.70711 0.292893L6.70711 5.29289L5.29289 6.70711Z" fill="#313942"/>\n              </svg>\n            </div>\n\n            <div class="conversation-selector__header-close">\n              <svg width="15" height="16" viewBox="0 0 15 16" xmlns="http://www.w3.org/2000/svg">\n                <path fill-rule="evenodd" clip-rule="evenodd" d="M7.49998 9.63673L1.97906 15.1577C1.52604 15.6107 0.791253 15.6127 0.339281 15.1607C-0.115843 14.7056 -0.111341 13.9746 0.342318 13.5209L5.86324 8L0.342318 2.47906C-0.110696 2.02604 -0.112692 1.29124 0.339281 0.839272C0.794404 0.384148 1.5254 0.388668 1.97906 0.842327L7.49998 6.36326L13.0209 0.842327C13.474 0.389313 14.2087 0.387299 14.6607 0.839272C15.1158 1.2944 15.1113 2.0254 14.6577 2.47906L9.13672 8L14.6577 13.5209C15.1107 13.974 15.1127 14.7088 14.6607 15.1607C14.2056 15.6159 13.4746 15.6113 13.0209 15.1577L7.49998 9.63673Z" />\n              </svg>\n            </div>\n          </div>\n\n          <div class="conversation-selector__wrapper">\n            <div class="conversation-selector__conversations"></div>\n            <div class="conversation-selector__action-button conversation-selector__open-all">\n              '+Xn("Show all")+'\n            </div>\n            <div class="conversation-selector__action-button conversation-selector__add-button">\n              '+Xn("Create new conversation")+"\n            </div>\n          </div>\n        </div>\n      </div>\n    "},qn.prototype.getFormattedDate=function(t){t=new Date(t);var e=new Date,n=new Date(Date.now()-864e5),i=t.getDate(),o=t.getMonth()+1;t=t.getFullYear();return i===e.getDate()&&o===e.getMonth()+1&&t===e.getFullYear()?Xn("Today"):i===n.getDate()&&o===n.getMonth()+1&&t===n.getFullYear()?Xn("Yesterday"):(i=i<10?"0"+i:i)+"."+(o=o<10?"0"+o:o)+"."+t},qn.prototype.getNode=function(t){return this.view.querySelector(t)||(console.error(t+" node not found"),!1)},qn.prototype.initMediaMatcher=function(){var t=this;this._mediaMatcher=matchMedia("(max-width: 450px)"),this._mediaMatcher.onchange=function(e){t.onMediaChange(e.matches)}},W.isMobile.get=function(){return this._mediaMatcher.matches},qn.prototype.onMediaChange=function(){this.renderConversations()},qn.prototype.calculateSelectorHeight=function(){var t,e,n;this.parentHeight&&(t=this.getNode(this.getSelectors().conversationsWrapper),e=this.visibleConversationsCount,n=this.isOpenedAll?1:2,this.visibleConversationsCount=Math.floor((this.parentHeight-44-42*n-16)/69),this.visibleConversationsCount=this.visibleConversationsCount<2?2:this.visibleConversationsCount,this.visibleConversationsCount>=this.conversations.length?(this.visibleConversationsCount=this.conversations.length,this.setVisibilityAllButton(!1)):this.setVisibilityAllButton(!this.isOpenedAll),this.isMobile?t.style.height="":t.style.height=69*this.visibleConversationsCount+"px",e!==this.visibleConversationsCount&&this.renderConversations())},qn.prototype.openSelector=function(t){this.toggleSelector(!0),t&&(this.isBlockedCloseSelector=t,this.getNode(this.getSelectors().headerIcon).classList.add("invisible"))},qn.prototype.getHeight=function(){return this.getNode(this.getSelectors().selector).offsetHeight},qn.prototype.renderConversations=function(){var t=this;if(!this.conversations.length&&!this.selectedConversation)return this.view.style.display="none",void this.toggleSelector(!1);this.view.style.display="block";var e=this.getNode(this.getSelectors().conversationsWrapper),n=(e||this.render(),"");this.conversations.forEach((function(e,i){i>t.visibleConversationsCount-1&&!t.isOpenedAll||(i={id:e.id,name:e.name,selected:t.selectedConversationId===e.id},(e=e.last_message)?(i.date=t.getFormattedDate(e.created_at),i.author=e.author?e.author.name:Xn("You"),i.message=e.text):console.error("last message not defined"),n+=t.getConversationTemplate(i))})),e.innerHTML=n,this.setConversationsEvents(),this.calculateSelectorHeight()},W.selectedConversationId.get=function(){return this.selectedConversation?this.selectedConversation.id:null},qn.prototype.render=function(){this._shouldOpenSelector=this.firstRender;var t=this.getSelectorTemplate();this.view.innerHTML=t;try{this.renderConversations()}catch(t){console.error("render conversations failure"),console.error(t)}this.conversations.length<2?(this.isSelectorOpened=!1,this.isBlockedCloseSelector=!1,this._shouldOpenSelector=!1,this.toggleSelector(!1)):this.getNode(this.getSelectors().headerIcon).classList.add("invisible"),this.toggleSelector(this._shouldOpenSelector),this.firstRender=!1,this.initDomEvents()},W.shouldOpenSelector.get=function(){return this._shouldOpenSelector},qn.prototype.initDomEvents=function(){var t=this;tn.add({target:this.getNode(this.getSelectors().selector),eventName:"click",handler:function(t){t.preventDefault()}}),tn.add({target:this.getNode(this.getSelectors().header),eventName:"click",handler:function(e){t.isMobile?t.handleMobileHeaderClick(e):t.handleSelectorClick(e)}}),tn.add({target:this.getNode(this.getSelectors().addConversation),eventName:"click",handler:function(e){t._shouldOpenSelector=!1,t.setSelectedConversation(null),t.handleAddConversationClick(e),t.onAddConversationClick(e)}}),tn.add({target:this.getNode(this.getSelectors().openAll),eventName:"click",handler:function(e){t.handleOpenAllClick(e),t.onOpenAllClick(e)}})},qn.prototype.setConversationsEvents=function(){var t=this;this.view.querySelectorAll(this.getSelectors().conversationItem).forEach((function(e){tn.add({target:e,eventName:"click",handler:function(e){t._shouldOpenSelector=!1,t.handleItemClick(e),t.onConversationClick(e)}})}))},qn.prototype.setVisibilityAllButton=function(t){this.getNode(this.getSelectors().openAll).classList.toggle("invisible",!t)},qn.prototype.setConversations=function(t){var e;this.selectedConversation&&(e=qe(t,{id:this.selectedConversation.id}))&&(this.selectedConversation=e),this.conversations=t,this.renderConversations(),this.triggerOnConversationsChange()},qn.prototype.setSelectedConversation=function(t){t?(this.context.sendBusMessage({method:"select_conversation",payload:t}),this.selectedConversation=qe(this.conversations,{id:t})):this.selectedConversation=t,this.renderConversations()},qn.prototype.setParentHeight=function(t){t&&(this.parentHeight=parseInt(t),this.calculateSelectorHeight())},qn.prototype.busHeaderClick=function(){this.tryToToggleSelector()},qn.prototype.handleSelectorClick=function(t){t.stopPropagation(),this.tryToToggleSelector()},qn.prototype.tryToToggleSelector=function(){!this.view||this.firstRender||this.isBlockedCloseSelector||this.toggleSelector()},qn.prototype.handleMobileHeaderClick=function(t){t.stopPropagation(),t.target.closest(this.getSelectors().closeMobile)?Gn("click_button"):this.tryToToggleSelector()},qn.prototype.handleOpenAllClick=function(t){t.stopPropagation(),this.setVisibilityAllButton(!1),this.isOpenedAll=!0,this.renderConversations(),this.calculateSelectorHeight()},W.isOpenedAll.get=function(){return this._isOpenedAll||this.isMobile},W.isOpenedAll.set=function(t){return this._isOpenedAll=t},qn.prototype.handleAddConversationClick=function(t){t.stopPropagation(),this.context.sendBusMessage({method:"add_conversation"}),this.toggleSelector(!1),this.isBlockedCloseSelector=!1,this.getNode(this.getSelectors().headerIcon).classList.toggle("invisible",this.isBlockedCloseSelector),this.conversations.length||this.triggerOnConversationsChange()},qn.prototype.handleItemClick=function(t){t.stopPropagation(),t=t.currentTarget.getAttribute("data-id"),this.selectedConversationId!==t&&this.setSelectedConversation(t),this.toggleSelector(!1),this.isBlockedCloseSelector=!1,this.getNode(this.getSelectors().headerIcon).classList.toggle("invisible",this.isBlockedCloseSelector)},qn.prototype.triggerOnConversationsChange=function(){function t(t){var e,n,i,o,r,s,a=t.name,c=t.is_closed;return(t=t.last_message)&&(e=t.created_at,n=t.is_out,i=t.text,s=t.media_url,o=t.type,r=t.author,o="picture"===o?"photo":o,s={media:s?{url:s,thumbnail:t[o]?t[o].thumbnail:void 0}:void 0,created_at:e,is_out:n,text:i,type:o,author:r=r?{name:r.name}:void 0}),{name:a,is_closed:c,last_message:s}}var e=this,n=!1,i=this.conversations.map((function(i){var o=i.id;return n=n||o===e.selectedConversationId,t(i)}));this.selectedConversation&&!n&&i.push(Object.assign({},t(this.selectedConversation),{is_closed:!0})),je("onConversationsChange",i)},qn.prototype.toggleSelector=function(t){void 0===t&&(t=!this.isSelectorOpened),this.isSelectorOpened=t,t="closed",this.isSelectorOpened&&(t=this.shouldOpenSelector?"opened-fully":"opened"),this.getNode(this.getSelectors().selector).classList.toggle("opened",this.isSelectorOpened),this.context.sendBusMessage({method:"selector_open_state",payload:t}),this.onSelectorToggle(t)},Object.defineProperties(qn.prototype,W),"amo-livechat"),ni="amo-livechat_bubble",ii="amo-livechat_chat",oi="amo-livechat_opening",ri="amo-livechat_hiding",si="amo-livechat_hidden",ai="amo-livechat-id",ci=(Jn.prototype.show=function(){var t=this;!this.isActive&&this.isEnabled&&this.isInited&&(this.isActive=!0,this.hideBubble(),this.getUUID()||this.setUUID(),setTimeout((function(){document.documentElement.classList.add(t.activeClassName),t.iframe_wrapper.classList.remove(oi),t.iframe.focus()}),200),document.documentElement.classList.add(this.name),this.iframe_wrapper.style.bottom="",this.iframe_wrapper.classList.remove(si),this.iframe_wrapper.classList.add(oi),this.iframe_wrapper.classList.add(ii),this.isInline&&"vertical"===this.props.orientation&&(this.iframe_wrapper.style[this.props.position.h]=this.socialServiceSizeWithMargin+25+"px",this.iframe_wrapper.style[this.props.position.v]="top"===this.props.position.v?"-19px":"-22px"),this.sendBusMessage({method:"livechat:onShow"},"socials"),this.sendBusMessage({method:"toggle",payload:{state:!0}},"livechat"),this.handleWindowResize(),je("onChatShow"))},Jn.prototype.hide=function(){var t=this;this.isActive&&this.isEnabled&&this.isInited&&(this.isActive=!1,document.documentElement.classList.remove(this.activeClassName),this.iframe_wrapper.classList.add(ri),setTimeout((function(){document.documentElement.classList.remove(t.name),t.iframe_wrapper.classList.remove(ri),t.iframe_wrapper.classList.remove(ii),t.iframe_wrapper.classList.contains(ni)||(t.iframe_wrapper.classList.add(si),t.iframe_wrapper.style.height="")}),200),this.sendBusMessage({method:"toggle",payload:{state:!1}}),je("onChatHide"))},Jn.prototype.awaitLivechatAnimation=function(t){function e(){return i.iframe_wrapper.classList.contains(oi)}function n(){return i.iframe_wrapper.classList.contains(ri)}var i=this;switch(!0){case e():var o=setInterval((function(){i.isActive?e()||(clearInterval(o),t()):clearInterval(o)}),20);break;case n():var r=setInterval((function(){i.isActive?clearInterval(r):n()||(clearInterval(r),t())}),20);break;default:t()}},Jn.prototype.showBubble=function(){var t=this;this.awaitLivechatAnimation((function(){t.isActive||t.props.isButtonOpened()||("widget"===t.mode&&(t.sendBusMessage({method:"bubble",payload:{state:!0}}),t.iframe_wrapper.classList.remove(si),t.iframe_wrapper.classList.add(ni)),t.showBadge())}))},Jn.prototype.hideBubble=function(){this.sendBusMessage({method:"bubble",payload:{state:!1}}),this.iframe_wrapper.classList.remove(ni),this.iframe_wrapper.classList.add(si),this.resizeIframeWrapper(null),this.hideBadge()},Jn.prototype.showGreeting=function(){this.isInited?this.isActive||this.sendBusMessage({method:"greeting"}):this.isGreetingAwaited=!0},Jn.prototype.resizeIframeWrapper=function(t){if(null===t)return this.iframe_wrapper.style.height=null,void(this.iframe_wrapper.style.width=null);this.iframe_wrapper.style.height=parseFloat(t.height)+"px",this.iframe_wrapper.style.width=parseFloat(t.width)+"px"},Jn.prototype.centrifyIframeWrapper=function(t){t=t.bubbleHeight;var e,n=this.props.container,i=this.iframe_wrapper,o=this.props.position.v;(n||i||o)&&(n=(t-(t=n.offsetHeight))/2,i.style[o]=null,e=getComputedStyle(i).getPropertyValue(o),e=parseInt(e,10)-n,"top"===o?e+=9:"bottom"===o&&t<50&&(e+=2),i.style[o]=e+"px")},Jn.prototype.updateBadge=function(t){this.badgeCount=t,0<(this.badge.innerText=t)&&!this.isActive&&!this.props.isButtonOpened()?this.showBadge():this.hideBadge(),this.sendBusMessage({method:"badge",payload:{count:t}},"socials")},Jn.prototype.showBadge=function(){0<this.badgeCount&&!this.props.isButtonOpened()&&(this.badge.style.display=null)},Jn.prototype.hideBadge=function(){this.badge.style.display="none"},Jn.prototype.getUUID=function(){if(this.custom_user_id)return this.custom_user_id;var t=Mn.get(ai);return t||(t=En(),Mn.set(ai,t,{expires:365})),t},Jn.prototype.setUUID=function(){var t=this.getUUID();this.sendBusMessage({method:"init",payload:{uuid:t}})},Jn.prototype.setupIframe=function(){var t,e=this,n=(t=this.props).account_name,i=t.button,o=t.close_button,r=t.container,s=t.greeting,a=t.greeting_bot_params,c=t.host,l=t.locale,u=t.orientation,h=t.position,d=t.socket_url,p=t.session_uid,f=t.isCopyrightVisible,m=((t=document.createElement("div")).id="amo-livechat",t.className=[ei,si].concat("frame"===this.mode?["amo-livechat_frame"]:[ei+"_"+h.v+"-"+h.h,ei+"_"+u]).join(" "),t.style.background="frame"===this.mode?"none":"",document.createElement("style")),g=(m.id="","\n      html."+this.name+" .amo-brand {\n        display: none;\n      }\n    ");return this.chatContainer?t.classList.add("amo-livechat--no-mobile"):g+="\n        @media (max-width: 450px) {\n          html."+this.activeClassName+" {\n            overflow: hidden !important;\n          }\n          html."+this.activeClassName+" > body {\n            background: #fff !important;\n            overflow: hidden !important;\n          }\n          html."+this.activeClassName+" > body > *:not(.amo-button-holder):not(.amo-livechat-first-container) {\n            display: none;\n          }\n          ."+ii+" {\n            position: fixed;\n            top: 0 !important;\n            right: 0 !important;\n            bottom: 0 !important;\n            left: 0 !important;\n            width: 100%;\n            height: 100%;\n            max-height: unset;\n            min-height: unset;\n            border-radius: 0;\n          }\n        }",m.innerHTML=g,this.iframe=document.createElement("iframe"),this.iframe.title=this.brandName+" Live Chat",this.iframe.name=this.name,this.iframe.src=c+"/livechat/index.html?xK7UBt9QOfgQHBL0uUC6z",Un=l,this.iframe.onload=function(){e.isInited=!0,e.iframe.contentWindow.postMessage(JSON.stringify({method:"configure",payload:{AMO_LIVECHAT_MODE:e.mode,AMO_LIVECHAT_USER_PARAMS:e.userData,AMO_LIVECHAT_USER_PROFILE:e.userProfile,AMO_LIVECHAT_USER_LOCALE:e.locale,AMO_LIVECHAT_THEME:e.theme,AMO_LIVECHAT_UUID:e.isEnabled&&e.getUUID(),AMO_LIVECHAT_SOCKET_URL:d,AMO_LIVECHAT_SESSION_UID:p,AMO_LIVECHAT_BUTTON_ID:i.id,AMO_LIVECHAT_BUTTON_HASH:i.hash,AMO_LIVECHAT_BUTTON_HEIGHT:e.props.container.offsetHeight,AMO_LIVECHAT_IFRAME:e.name,AMO_LIVECHAT_LOCALE:l,AMO_LIVECHAT_GREETING:s?s.message:"",AMO_LIVECHAT_GREETING_BUTTONS:s?hn(s.message_buttons):[],AMO_LIVECHAT_GREETING_BOT:s?s.bot:{},AMO_LIVECHAT_GREETING_BOT_PARAMS:a||{},AMO_LIVECHAT_HEADER_COLOR:i.color,AMO_LIVECHAT_POSITION:h.v+"-"+h.h,AMO_LIVECHAT_ORIENTATION:u,AMO_LIVECHAT_DEFAULT_AVATAR:s&&s.chat_avatar_path?s.chat_avatar_path:"",AMO_LIVECHAT_TITLE:s&&s.chat_header?s.chat_header:n,AMO_LIVECHAT_USE_RESP_AVATAR:!s||""!==s.use_avatar,AMO_LIVECHAT_USE_NAME:!!s&&"Y"===s.use_name,AMO_LIVECHAT_CLOSE_VISIBLE:!!o,AMO_LIVECHAT_IS_COPYRIGHT_VISIBLE:f,AMO_BRAND_NAME:e.brandName}}),c),je("onChatReady"),"function"==typeof e.props.onIframeLoaded&&e.props.onIframeLoaded()},this.badge=document.createElement("div"),this.badge.className="amo-button-greeting-badge",this.hideBadge(),t.appendChild(this.iframe),(this.chatContainer||r).appendChild(t),r.appendChild(m),r.appendChild(this.badge),tn.add({target:window,eventName:"resize",handler:this.handleWindowResize}),t},Jn.prototype.sendBusMessage=function(t,e){switch(e=void 0===e?"livechat":e){case"livechat":if(!this.iframe)return;this.iframe.contentWindow.postMessage(JSON.stringify(Object.assign({},{origin:this.name},t)),this.props.host);break;case"socials":var n=window.frames&&window.frames.social_iframe;n&&n.postMessage(t,"*");break;default:throw new Error("Unknown recipient name.")}},Jn.prototype.handleBusMessage=function(t){var e=this,n=this.props,i=n.greeting,o=n.host,r=n.modal;if(t.origin===o)try{var s=JSON.parse(t.data);if(s&&s.origin===this.name)switch(s.method){case"livechat:rendered":this.handleWindowResize(),je("onChatRenderDone");break;case"bubble":this.showBubble();break;case"bubble:hide":this.hideBubble();break;case"bubble:click":"function"==typeof this.props.forceButtonCollapse&&this.props.forceButtonCollapse(),this.show();break;case"bubble:autosize":var a=s.payload,c=a.height,l=a.width;this.resizeIframeWrapper({height:c,width:l});break;case"bubble:centrify":this.centrifyIframeWrapper(s.payload);break;case"badge":this.updateBadge(s.count||0);break;case"modal":r&&r.show(s.payload,this.sendBusMessage.bind(this));break;case"greeting:init":this.sendBusMessage({method:"toggle",payload:{state:this.isActive}}),this.isGreetingAwaited&&(this.isGreetingAwaited=!1,this.showGreeting()),this.hasGreetingReaction||(this.greeting=new Rn(i,(function(){return e.showGreeting()})));break;case"conversations:received":this.renderConversationSelector({conversations:s.payload,selected:s.selected});break;case"conversations:update":s.selected&&this.conversationSelector.setSelectedConversation(s.selected),this.conversationSelector.setConversations(s.payload);break;case"conversation_selector:header-click":this.conversationSelector.busHeaderClick();break;case"livechat:multi-dialogs-enabled":this.isMultiDialogsEnabled=s.payload,this.isMultiDialogsEnabled||je("onConversationsChange",!1);break;default:throw new Error("Unexpected bus message method - "+s.method)}}catch(t){}},Jn.prototype.renderConversationSelector=function(t){var e,n=this,i=t.conversations;t=t.selected;this.conversationSelector||((e=document.createElement("div")).classList.add("amo-livechat__dialogs-selector"),this.iframe_wrapper.append(e),this.conversationSelector=new qn({context:this,conversations:i,selectorWrapper:e,onConversationClick:function(){n.handleWindowResize()},onAddConversationClick:function(){n.handleWindowResize()},onOpenAllClick:function(){n.handleWindowResize()},onSelectorToggle:function(t){t="closed"!==t,n.iframe_wrapper.classList.toggle("amo-livechat--selector-opened",t),e.classList.toggle("amo-livechat__dialogs-selector--opened",t)}}),this.conversationSelector.render(),t&&this.conversationSelector.setSelectedConversation(t),this.livechatHeight&&this.conversationSelector.setParentHeight(this.livechatHeight))},Jn.prototype.handleWindowResize=function(){if(this.isActive){var t,e=window.innerHeight,n=window.innerWidth,i=this.iframe.parentNode.getBoundingClientRect(),o="top"===this.props.position.v?i.top:i.bottom,r=(i=window.innerWidth<=450,0);switch(!0){case"top"===this.props.position.v:r=o+120;break;case"page"===this.props.position.v:r=240;break;default:r=e-o+120}this.livechatHeight=i?this.iframe.parentNode.offsetHeight:e-r,this._livechatHeight=this.livechatHeight,this.conversationSelector&&(t=i?this.iframe.parentNode.offsetHeight:this._livechatHeight,this.conversationSelector.setParentHeight(t),this.conversationSelector.shouldOpenSelector&&(t=this.conversationSelector.getHeight(),this.livechatHeight=360<t?t+45:400)),this.iframe.parentNode.style.height=i?"":this.livechatHeight+"px",this.sendBusMessage({method:"resize",payload:{width:n}})}},Jn.prototype.destroy=function(){this.greeting&&this.greeting.destroy()},{}),li=($n.getConditionsItems=function(t){return void 0===t&&(t={}),Object.keys(t).reduce((function(e,n){var i=(n=t[n]).conditions[0]||{};return i&&(e[n.type]=i),e}),{})},$n.getKey=function(t){return"keyaction_reached"+t},$n.compareWithMask=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e="");var i=!1;switch(parseInt(n,10)){case 1:i=t===e;break;case 2:i=t!==e;break;case 3:i=t.startsWith(e);break;case 4:i=t.endsWith(e);break;case 5:i=t.includes(e);break;case 6:i=!t.includes(e);break;default:i=!1}return i},$n.prototype.parse=function(t){var e=this;Object.keys(t).forEach((function(n){var i=t[n];n=Object.keys(i.conditions);e.reactions[i.id]=i.reactions,n.length?e.conditions=n.reduce((function(t,e){e=i.conditions[e];var n=En();return t[n]={id:n,keyaction_id:i.id,constraint:i.constraint,items:$n.getConditionsItems(e.settings)},t}),e.conditions):e.react({keyaction_id:i.id,constraint:i.constraint})}))},$n.prototype.run=function(){var t=this,e=(this.listenPageScroll(),window.location.pathname),n=parseInt(sessionStorage.getItem("amo_social_button_tracking_hits"),10)||0;Object.keys(this.conditions).forEach((function(i){var o=(s=t.conditions[i].items).url_visited,r=s.page_hits,s=s.time_on_site;r&&r.value&&n>r.value&&t.reach(i,"page_hits"),o&&$n.compareWithMask(e,o.value,o.mask)&&t.reach(i,"url_visited"),s&&s.value&&(t.conditionTimeouts[i]=setTimeout(t.reach.bind(t,i,"time_on_site"),1e3*s.value))}))},$n.prototype.reach=function(t,e){void 0===e&&(e=null);var n=this.conditions[t];n&&(this.reached[t]||(this.reached[t]=[]),e&&-1===this.reached[t].indexOf(e)&&this.reached[t].push(e),this.reached[t].length===Object.keys(n.items).length&&this.react(n))},$n.prototype.reachHook=function(t){var e=this;Object.keys(this.conditions).forEach((function(n){var i=((n=e.conditions[n]).items||{}).custom_hook;i&&i.value===t&&e.reach(n.id,"custom_hook")}))},$n.prototype.react=function(t){var e,n=this;this.checkConstraint(t)&&(e=this.reactions[t.keyaction_id],Object.keys(e).forEach((function(t){var i=e[t];switch(i.action){case"amobutton_form":var o=(r=i.settings.form.split("_"))[0],r=r[1];n.showForm(o,r);break;case"amobutton_greeting":n.showGreeting();break;case"amobutton_animate":n.showAnimation(parseInt(i.settings.animation,10))}})),this.sendCRMReactions(t.keyaction_id),this.constraintTimeouts[t.keyaction_id]&&clearTimeout(this.constraintTimeouts[t.keyaction_id]),this.conditionTimeouts[t.id]&&clearTimeout(this.conditionTimeouts[t.id]))},$n.prototype.checkConstraint=function(t){var e=t.keyaction_id,n=!1;try{switch(parseInt(t.constraint,10)){case 2:sessionStorage.getItem($n.getKey(e))||(sessionStorage.setItem($n.getKey(e),"y"),n=!0);break;case 4:localStorage.getItem($n.getKey(e))||(localStorage.setItem($n.getKey(e),"y"),n=!0);break;case 3:var i,o=(parseInt(localStorage.getItem($n.getKey(e,"shown_at")),10)||0)+864e5;Date.now()<o?(i=o-Date.now())/1e3<900&&(this.constraintTimeouts[e]=setTimeout(this.react.bind(this,t),i)):n=!0;break;default:ci[$n.getKey(e)]||(ci[$n.getKey(e)]="y",n=!0)}}catch(t){n=!1}return n},$n.prototype.listenPageScroll=function(){for(var t=Object.keys(this.conditions),e=!1,n=0,i=t.length;n<i&&!(e=!!this.conditions[t[n]].items.scrolled_value);n+=1);e&&(this.handlePageScrollDebounced=Fn(this.handlePageScroll.bind(this),100),tn.add({target:window,eventName:"scroll",handler:this.handlePageScrollDebounced}),this.handlePageScroll())},$n.prototype.handlePageScroll=function(){var t=this,e=window.innerHeight*(window.innerHeight/document.documentElement.scrollHeight),n=window.pageYOffset+e;Object.keys(this.conditions).forEach((function(i){var o,r=t.conditions[i].items.scrolled_value;r&&(o=r.unit,r=r.value,o="%"===o?document.documentElement.scrollHeight*r/100:r,e+o<=n&&t.reach(i,"scrolled_value"))}))},"amo-modal"),ui="amo-modal_hidden";function hi(t,e){return t(e={exports:{}},e.exports),e.exports}Qn.prototype.initModalIframe=function(){var t=this;this.isActive=!1,this.name="amo-modal-iframe-"+En(8),tn.add({target:window,eventName:"message",handler:function(e){return t.handleBusMessage(e)}}),this.iframe_wrapper=this.setupIframe()},Qn.prototype.setupIframe=function(){var t=this,e=(n=this.props).host,n=n.container,i=document.createElement("div"),o=(i.id="amo-modal",i.className=[li,ui].join(" "),document.createElement("style"));return o.type="text/css",o.id="",o.innerHTML="\n      ."+li+" {\n        position: fixed;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        z-index: 2147483648;\n      }\n      ."+li+" > iframe {\n        border: none;\n        width: 100%;\n        height: 100%;\n      }\n      ."+ui+" {\n        display: none;\n      }\n    ",this.iframe=document.createElement("iframe"),this.iframe.title=this.brandName+" Media Modal",this.iframe.name=this.name,this.iframe.src=e+"/modal/index.html?xK7UBt9QOfgQHBL0uUC6z",this.iframe.onload=function(){t.iframe.contentWindow.postMessage(JSON.stringify({method:"configure",payload:{AMO_MODAL_IFRAME:t.name}}),e)},i.appendChild(this.iframe),i.appendChild(o),n.appendChild(i),i},Qn.prototype.show=function(t,e){this.isActive||(this.isActive=!0,this.sendBusMessageToLivechat=e,this.iframe_wrapper.classList.remove(ui),document.documentElement.classList.add(this.name),rn([this.props.container]),this.iframe.focus(),this.sendBusMessage({method:"show",payload:t}))},Qn.prototype.close=function(){this.isActive&&(this.isActive=!1,sn([this.props.container]),document.documentElement.classList.remove(this.name),this.iframe_wrapper.classList.add(ui),document.removeEventListener("keydown",this.closeOnEsc),this.sendBusMessage({method:"clear"}))},Qn.prototype.sendBusMessage=function(t){this.iframe&&this.iframe.contentWindow.postMessage(JSON.stringify(Object.assign({},{origin:this.name},t)),this.props.host)},Qn.prototype.handleBusMessage=function(t){if(t.origin===this.props.host)try{var e=JSON.parse(t.data);if(e&&e.origin===this.name)switch(e.method){case"close":this.close();break;case"event":this.sendBusMessageToLivechat({method:"event",payload:e.payload});break;default:throw new Error("Unexpected bus message method - "+e.method)}}catch(t){}},k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};for(var di=hi((function(t){var e,n,i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);i?(e=new Uint8Array(16),t.exports=function(){return i(e),e}):(n=new Array(16),t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),n[e]=t>>>((3&e)<<3)&255;return n})})),pi=[],fi=0;fi<256;++fi)pi[fi]=(fi+256).toString(16).substr(1);function mi(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":(Si&&Si in Object(t)?Ci:ki)(t)}function gi(t){return null!=t&&"object"==typeof t}var vi="object"==typeof k&&k&&k.Object===Object&&k,_i=(k="object"==typeof self&&self&&self.Object===Object&&self,vi||k||Function("return this")()),yi=(k=_i.Symbol,(A=Object.prototype).hasOwnProperty),bi=A.toString,wi=k?k.toStringTag:void 0,Ci=function(t){var e=yi.call(t,wi),n=t[wi];try{var i=!(t[wi]=void 0)}catch(t){}var o=bi.call(t);return i&&(e?t[wi]=n:delete t[wi]),o},Ii=Object.prototype.toString,ki=function(t){return Ii.call(t)},Si=k?k.toStringTag:void 0,Ai=(A=function(t){return gi(t)&&"[object Arguments]"==mi(t)},(k=Object.prototype).hasOwnProperty),Oi=k.propertyIsEnumerable,Ei=A(function(){return arguments}())?A:function(t){return gi(t)&&Ai.call(t,"callee")&&!Oi.call(t,"callee")},xi=Array.isArray;function Mi(){return!1}function Li(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=9007199254740991}var Ti=hi((function(t,e){var n=(e=e&&!e.nodeType&&e)&&t&&!t.nodeType&&t;e=(n=n&&n.exports===e?_i.Buffer:void 0)?n.isBuffer:void 0;t.exports=e||Mi})),ji=/^(?:0|[1-9]\d*)$/,Ni={};function Bi(t){return null==t?[]:function(t,e){for(var n=-1,i=null==t?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}(t=(Wi(t=e=t)?zi:Vi)(t),(function(t){return e[t]}));var e}Ni["[object Float32Array]"]=Ni["[object Float64Array]"]=Ni["[object Int8Array]"]=Ni["[object Int16Array]"]=Ni["[object Int32Array]"]=Ni["[object Uint8Array]"]=Ni["[object Uint8ClampedArray]"]=Ni["[object Uint16Array]"]=Ni["[object Uint32Array]"]=!0,Ni["[object Arguments]"]=Ni["[object Array]"]=Ni["[object ArrayBuffer]"]=Ni["[object Boolean]"]=Ni["[object DataView]"]=Ni["[object Date]"]=Ni["[object Error]"]=Ni["[object Function]"]=Ni["[object Map]"]=Ni["[object Number]"]=Ni["[object Object]"]=Ni["[object RegExp]"]=Ni["[object Set]"]=Ni["[object String]"]=Ni["[object WeakMap]"]=!1;k=function(t){return function(e){return t(e)}};var Ri,Fi,Pi=(A=(A=hi((function(t,e){var n=(e=e&&!e.nodeType&&e)&&t&&!t.nodeType&&t,i=n&&n.exports===e&&vi.process;e=function(){try{return n&&n.require&&n.require("util").types||i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=e})))&&A.isTypedArray)?k(A):function(t){return gi(t)&&Li(t.length)&&!!Ni[mi(t)]},Hi=Object.prototype.hasOwnProperty,zi=function(t,e){var n,i,o,r,s=xi(t),a=!s&&Ei(t),c=!s&&!a&&Ti(t),l=!s&&!a&&!c&&Pi(t),u=s||a||c||l,h=u?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],d=h.length;for(n in t)!e&&!Hi.call(t,n)||u&&("length"==n||c&&("offset"==n||"parent"==n)||l&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||(void 0,r=typeof(i=n),(o=null==(o=d)?9007199254740991:o)&&("number"==r||"symbol"!=r&&ji.test(i))&&-1<i&&i%1==0&&i<o))||h.push(n);return h},Di=Object.prototype,Ui=(Ri=Object.keys,Fi=Object,function(t){return Ri(Fi(t))}),Gi=Object.prototype.hasOwnProperty,Vi=function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||Di))return Ui(t);var e,n,i,o=[];for(i in Object(t))Gi.call(t,i)&&"constructor"!=i&&o.push(i);return o},Wi=function(t){return null!=t&&Li(t.length)&&(e=typeof(t=t),!!(null==t||"object"!=e&&"function"!=e||"[object Function]"!=(t=mi(t))&&"[object GeneratorFunction]"!=t&&"[object AsyncFunction]"!=t&&"[object Proxy]"!=t));var e},Ki={TRACKING_PAGES:"amo_social_button_tracking_pages",TRACKING_HITS:"amo_social_button_tracking_hits",TRACKING_TIME:"amo_social_button_tracking_time",TRACKING_REFERRER:"amo_social_button_tracking_referrer",TRACKING_UUID:"amo_social_button_tracking_uuid",TRACKING_SESSION_ID:"amo_social_button_tracking_session_id",LINKED_CONTACTS:"amo_social_button_linked_contacts",IS_TRACKING_LINK_SENT:"is_send_follow_link"},Yi=!1,Xi=null;function qi(){return document.title?document.title+" ("+window.location.pathname+")":window.location.pathname}function Ji(){var t=window.sessionStorage.getItem(Ki.TRACKING_UUID);return t||(t=function(t,e,n){var i=("string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),(t=t||{}).random||(t.rng||di)());if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var o=0;o<16;++o)e[0+o]=i[o];return e||function(t,e){e=e||0;var n=pi;return[n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],"-",n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],n[t[e++]],n[t[+e]]].join("")}(i)}(),window.sessionStorage.setItem(Ki.TRACKING_UUID,t)),t}function Zi(){var t=window.sessionStorage.getItem(Ki.TRACKING_SESSION_ID);return t||(t=function(t){void 0===t&&(t=21);for(var e="",n=crypto.getRandomValues(new Uint8Array(t));t--;){var i=63&n[t];e+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return e}(11),window.sessionStorage.setItem(Ki.TRACKING_SESSION_ID,t)),t}k="%[a-f0-9]{2}";var $i=new RegExp(k,"gi"),Qi=new RegExp("("+k+")+","gi");function to(t,e){if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];var n=t.indexOf(e);return-1===n?[t]:[t.slice(0,n),t.slice(n+e.length)]}var eo=hi((function(t,e){function n(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function i(t,e){return e.encode?e.strict?encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):encodeURIComponent(t):t}function o(t,e){return e.decode?function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(c){for(var e=t,n={"%FE%FF":"��","%FF%FE":"��"},i=Qi.exec(e);i;){try{n[i[0]]=decodeURIComponent(i[0])}catch(t){var o=function(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match($i),n=1;n<e.length;n++)e=(t=function t(e,n){try{return decodeURIComponent(e.join(""))}catch(t){}if(1===e.length)return e;var i=e.slice(0,n=n||1);return e=e.slice(n),Array.prototype.concat.call([],t(i),t(e))}(e,n).join("")).match($i);return t}}(i[0]);o!==i[0]&&(n[i[0]]=o)}i=Qi.exec(e)}n["%C2"]="�";for(var r=Object.keys(n),s=0;s<r.length;s++){var a=r[s];e=e.replace(new RegExp(a,"g"),n[a])}return e}}(t):t}function r(t){var e=t.indexOf("#");return-1!==e?t.slice(0,e):t}function s(t){var e=(t=r(t)).indexOf("?");return-1===e?"":t.slice(e+1)}function a(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function c(t,e){n((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);var i=function(t){var e;switch(t.arrayFormat){case"index":return function(t,n,i){e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===i[t]&&(i[t]={}),i[t][e[1]]=n):i[t]=n};case"bracket":return function(t,n,i){e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0===i[t]?i[t]=[n]:i[t]=[].concat(i[t],n):i[t]=n};case"comma":case"separator":return function(e,n,i){n="string"==typeof n&&-1<n.split("").indexOf(t.arrayFormatSeparator)?n.split(t.arrayFormatSeparator).map((function(e){return o(e,t)})):null===n?n:o(n,t),i[e]=n};default:return function(t,e,n){void 0===n[t]?n[t]=e:n[t]=[].concat(n[t],e)}}}(e),r=Object.create(null);if("string"!=typeof t)return r;if(!(t=t.trim().replace(/^[?#&]/,"")))return r;for(var s=0,c=t.split("&");s<c.length;s+=1){var l=c[s],u=(l=to(e.decode?l.replace(/\+/g," "):l,"="))[0];l=void 0===(l=l[1])?null:["comma","separator"].includes(e.arrayFormat)?l:o(l,e);i(o(u,e),l,r)}for(var h=0,d=Object.keys(r);h<d.length;h+=1){var p=d[h],f=r[p];if("object"==typeof f&&null!==f)for(var m=0,g=Object.keys(f);m<g.length;m+=1){var v=g[m];f[v]=a(f[v],e)}else r[p]=a(f,e)}return!1===e.sort?r:(!0===e.sort?Object.keys(r).sort():Object.keys(r).sort(e.sort)).reduce((function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=function t(e){return Array.isArray(e)?e.sort():"object"==typeof e?t(Object.keys(e)).sort((function(t,e){return Number(t)-Number(e)})).map((function(t){return e[t]})):e}(n):t[e]=n,t}),Object.create(null))}e.extract=s,e.parse=c,e.stringify=function(t,e){if(!t)return"";n((e=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},e)).arrayFormatSeparator);for(var o=function(t){switch(t.arrayFormat){case"index":return function(e){return function(n,o){var r=n.length;return void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?n:null===o?n.concat([[i(e,t),"[",r,"]"].join("")]):n.concat([[i(e,t),"[",i(r,t),"]=",i(o,t)].join("")])}};case"bracket":return function(e){return function(n,o){return void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?n:null===o?n.concat([[i(e,t),"[]"].join("")]):n.concat([[i(e,t),"[]=",i(o,t)].join("")])}};case"comma":case"separator":return function(e){return function(n,o){return null==o||0===o.length?n:0===n.length?[[i(e,t),"=",i(o,t)].join("")]:[[n,i(o,t)].join(t.arrayFormatSeparator)]}};default:return function(e){return function(n,o){return void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?n:null===o?n.concat([i(e,t)]):n.concat([[i(e,t),"=",i(o,t)].join("")])}}}}(e),r={},s=0,a=Object.keys(t);s<a.length;s+=1){var c=a[s];e.skipNull&&null==t[c]||e.skipEmptyString&&""===t[c]||(r[c]=t[c])}var l=Object.keys(r);return!1!==e.sort&&l.sort(e.sort),l.map((function(n){var r=t[n];return void 0===r?"":null===r?i(n,e):Array.isArray(r)?r.reduce(o(n),[]).join("&"):i(n,e)+"="+i(r,e)})).filter((function(t){return 0<t.length})).join("&")},e.parseUrl=function(t,e){e=Object.assign({decode:!0},e);var n=(i=to(t,"#"))[0],i=i[1];return Object.assign({url:n.split("?")[0]||"",query:c(s(t),e)},e&&e.parseFragmentIdentifier&&i?{fragmentIdentifier:o(i,e)}:{})},e.stringifyUrl=function(t,n){n=Object.assign({encode:!0,strict:!0},n);var o,s,a=r(t.url).split("?")[0]||"",c=e.extract(t.url),l=(c=e.parse(c,{sort:!1}),c=Object.assign(c,t.query),c=(c=e.stringify(c,n))&&"?"+c,o="",o=-1!==(s=(l=t.url).indexOf("#"))?l.slice(s):o);return""+a+c+(t.fragmentIdentifier?"#"+i(t.fragmentIdentifier,n):l)}})),no=(eo.extract,eo.parse,eo.stringify,eo.parseUrl,eo.stringifyUrl,["from","openstat_service","openstat_campaign","openstat_ad","openstat_source","utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_referrer","gсlid","fbclid","yclid","referrer"]),io={baseURL:""},oo=!1,ro=!1;function so(t){switch(t.data){case"SET_AMO_PIXEL_READY":ro=!(oo=!0);break;case"IS_AMO_PIXEL_READY?":oo?t.source.postMessage("AMO_PIXEL_READY",t.origin):ro?t.source.postMessage("AMO_PIXEL_LOADING",t.origin):(ro=!0,t.source.postMessage("AMO_PIXEL_NOT_READY",t.origin))}}function ao(t){this.document=document,this.window=window,this.meta_params=t,this.bot_params={},this.init(t)}window.AMO_PIXEL_CLIENT||(window.addEventListener("message",so),window.AMO_PIXEL_CLIENT={getSessionUid:Ji,getShortSessionId:Zi,getTrackingLink:function(){if(!window.AMOCRM_NO_TRACKING&&!window.sessionStorage.getItem(Ki.IS_TRACKING_LINK_SENT))return window.sessionStorage.setItem(Ki.IS_TRACKING_LINK_SENT,"y"),document.location.href},makeMetadata:function(){if(!Xi){var t,e;try{t=JSON.parse(window.sessionStorage.getItem(Ki.TRACKING_PAGES)||{})}catch(e){t={}}e=(parseFloat(window.sessionStorage.getItem(Ki.TRACKING_TIME))||0)/1e3,Xi={hits:parseInt(window.sessionStorage.getItem(Ki.TRACKING_HITS),10)||0,pages:Object.keys(t),referrer:window.sessionStorage.getItem(Ki.TRACKING_REFERRER),time:parseInt(e,10),page:""},window.AMOCRM_NO_TRACKING||(Xi.page=qi())}return Xi},registerHit:function(){if(!Yi){var t,e=window.sessionStorage.getItem(Ki.TRACKING_REFERRER),n=document.referrer.split("/")[2],i=window.location.hostname,o=parseInt(window.sessionStorage.getItem(Ki.TRACKING_HITS),10)||0,r=parseFloat(window.sessionStorage.getItem(Ki.TRACKING_TIME),10)||0;Ji(),Zi();try{t=JSON.parse(window.sessionStorage.getItem(Ki.TRACKING_PAGES)||{})}catch(e){t={}}n&&n!==e&&n!==i&&(window.sessionStorage.setItem(Ki.TRACKING_REFERRER,n),window.sessionStorage.setItem(Ki.TRACKING_TIME,"0"),o=0,t={}),window.AMOCRM_NO_TRACKING||(t[qi()]=!0,window.sessionStorage.setItem(Ki.TRACKING_PAGES,JSON.stringify(t))),window.sessionStorage.setItem(Ki.TRACKING_TIME,r.toString()),window.sessionStorage.setItem(Ki.TRACKING_HITS,(o+1).toString()),window.sessionStorage.setItem(Ki.TRACKING_TIME,r.toString()),window.window.addEventListener("beforeunload",(function(){r+=performance.now(),window.sessionStorage.setItem(Ki.TRACKING_TIME,r.toString())})),Yi=!0}},extractTrackingParamsFromUrl:function(){return t=eo.parse(location.search),e=no,Object.keys(t).filter((function(t){return 0<=e.indexOf(t)})).reduce((function(e,n){return Object.assign(e,((e={})[n]=t[n],e))}),{});var t,e},extractTrackingParamsFromTrackers:function(t){var e=function(){var e,n;function i(t){"undefined"!=typeof ga?ga((function(){t([ga.getAll().map((function(t){return{key:"gclientid",value:t.get("clientId")}}))[0]])})):t([])}function o(t){var e;"undefined"!=typeof Ya?(e=(Ya.Metrika||Ya.Metrika2).counters().map((function(t){return t&&t.id})).filter((function(t){return t}))[0],"undefined"!=typeof ym?ym(e,"getClientID",(function(n){t([{key:"_ym_counter",value:e},{key:"_ym_uid",value:n}])})):void 0!==window["yaCounter"+e]?t([{key:"_ym_counter",value:e},{key:"_ym_uid",value:window["yaCounter"+e].getClientID()}]):t([])):t([])}function r(t){void 0!==window.roistat?t([{key:"roistat",value:window.roistat.getVisit()}]):t([])}e=function(e){function n(){l=0,i.forEach((function(t){l++;try{t(function(t){var e;-1<(t=a.indexOf(t))&&((e=Array.prototype.slice.call(arguments,1))&&e.length&&e.filter((function(t){return t.length})).length&&(a.splice(t,1),s=s.concat(e)),a.length||(clearTimeout(c),clearInterval(r),window.removeEventListener("beforeunload",o.bind(null,s)),o(s)))}.bind(null,l))}catch(t){}}))}var i,o,r,s,a,c,l;i=e,o=t,s=[],a=[],c=setTimeout((function(){clearInterval(r),o(s),window.removeEventListener("beforeunload",o.bind(null,s))}),5e3),window.addEventListener("beforeunload",o.bind(null,s)),l=0,i.forEach((function(){l++,a.push(l)})),n(),a.length&&(r=setInterval((function(){i.length&&n()}),500))},(n=new XMLHttpRequest).onload=function(){var t;try{t=JSON.parse(n.response)}catch(e){t={}}var s=[i,o,r];Object.keys(t).forEach((function(e){s.push(new Function(t[e]))})),e(s)},n.onerror=function(t){var n=[i,o,r];console.error("Failed to get custom trackers "+t.currentTarget.statusText),e(n)},n.open("GET",io.baseURL+"/callbacks/?id="+io.id+"&hash="+io.hash),n.send()};"complete"===document.readyState?e():document.onreadystatechange=function(){"complete"===document.readyState&&e()}},configure:function(t){Object.assign(io,t)},canSetupContactForHuman:function(t){var e;try{e=JSON.parse(window.sessionStorage.getItem(Ki.LINKED_CONTACTS))}catch(t){}if(-1===(e=e||[]).indexOf(t))return e.push(t),window.sessionStorage.setItem(Ki.LINKED_CONTACTS,JSON.stringify(e)),t},destroy:function(){window.removeEventListener("message",so),Bi(Ki).forEach((function(t){window.sessionStorage.removeItem(t)})),delete window.AMO_PIXEL_CLIENT}}),ao.prototype.init=function(t){var e,n,i=this,o=(t=t||{}).id||0,r=t.hash||!1,s="ru"!==t.locale?"com":"ru",a=(t=t.locale&&-1<["en","ru","es","pt"].indexOf(t.locale)?t.locale:"en",(c=i.document.querySelector("#crm_plugin_script")||i.document.querySelector("#amo_social_button_script")).parentNode),c=c.src;i.id=o,i.hash=r,i.collapsed=!0,i.lang_id=t,i.modal=null,i.greetingAwaited=!1,i.keyactionsAwaited=[],i.user_config=window.amoSocialButtonConfig||window.crmPluginConfig||{},i.socialFrameReady=!1,i.DEFAULT_Z_INDEX=parseInt(ti()),i.parent_node="HEAD"!==a.tagName?a:i.document.body,t=c,a=(t=new URL(t)).protocol,c=(t=t.hostname.split("."))[0],e=t.slice(1).join("."),n="",c.slice(0,c.length-2)in Le&&(n=c.slice(-2)),Le.gso=a+"//gso"+n+"."+e,Le.forms=a+"//forms"+n+"."+e,Le.button=a+"//button"+n+"."+e,n="",3<t.length&&(n="com"===t[t.length-1]?"en":"ru"),Le.promo=a+"//www"+n+"."+e,i.server_host=Le.gso,i.forms_host=Le.forms+"/forms/assets/js/amoforms.js",i.locale=s,0<o&&r&&i.get_settings(o,r),i.langs={en:{made_by:"Made by ","%brand% CRM Plugin social network list":"%brand% CRM Plugin social network list"},ru:{made_by:"Сделано в ","%brand% CRM Plugin social network list":"%brand% CRM Plugin список социальных сетей"},es:{made_by:"Hecho por ","%brand% CRM Plugin social network list":"%brand% CRM Plugin lista de redes sociales"},pt:{made_by:"Feito por ","%brand% CRM Plugin social network list":"Lista de redes sociais %brand% CRM Plugin"}}},ao.prototype.get_settings=function(t,e){var n=this,i=(e=n.server_host+"/social_button/settings/?client_version=3&id="+t+"&hash="+e,new XMLHttpRequest);i.onload=function(){if(200===i.status){var e,o=Me.toASCII(n.window.location.hostname),r=!1,s={},a=o.split("."),c=(a.shift(),a.join("."));try{if(e=JSON.parse(i.response),s=e.response.result?e.response:e.response[t],!/Macintosh|iPad|iPhone/.test(navigator.userAgent)&&s.settings.social_services&&(s.settings.social_services=Object.assign({},xe(s.settings.social_services,{type:Be}))),!Object.keys(s.settings.social_services).length)return;Object.keys(s.domains).map((function(t,e){if(!1===r&&-1!==Me.toASCII(s.domains[t]).search(o))return r=!0,n.check_settings(s),AMO_PIXEL_CLIENT.registerHit(),n.render(),!1})),!r&&s.settings&&s.settings.base_domains&&Object.keys(s.settings.base_domains).map((function(t,e){if(!1===r&&(t=Me.toASCII(s.settings.base_domains[t]),c===t))return r=!0,n.check_settings(s),AMO_PIXEL_CLIENT.registerHit(),n.render(),!1}))}catch(e){console.error(e)}n.meta_params.inline=n.meta_params.inline&&!n.isOnlyOneButton()}},i.open("GET",e),i.send()},ao.prototype.check_settings=function(t){var e,n;switch(this.settings=t.settings,this.settings.button.size=this.meta_params.inline?this.settings.button.size-10:this.settings.button.size,this.settings.date_update=t.date_update,this.settings.keyactions=t.key_actions||{},this.settings.brandName=t.brand_name,this.getVersion()){case 3:case 2:e=parseInt(this.settings.button.size),n=parseInt(this.settings.button.radius),this.orientation=parseInt(this.settings.button.orientation),this.settings.button.size=isNaN(e)?50:e,this.settings.button.radius=isNaN(n)?35:n,"Y"===this.settings.button.fixed&&(this.parent_node=document.body);break;default:e=parseInt(this.settings.button.button_size),this.settings.button.button_size=isNaN(e)?50:e,this.orientation=parseInt(this.settings.button.orient),this.settings.button.is_fixed||this._checkIfVerticalNotFixed(),"Y"===this.settings.button.is_fixed&&(this.parent_node=document.body)}this.services_count=Object.keys(this.settings.social_services).length},ao.prototype.getVersion=function(){return this.settings?this.settings.version||1:2},ao.prototype._checkIfVerticalNotFixed=function(){this.settings.button.button_position="bottom-left"},ao.prototype.render=function(){var t=this,e=t.getVersion(),n=1===e?[t.server_host+"/css/main.css"]:[t.server_host+"/css/v"+e+"/main.css?xK7UBt9QOfgQHBL0uUC6z",t.server_host+"/css/v"+e+"/livechat.css?xK7UBt9QOfgQHBL0uUC6z",t.server_host+"/css/v"+e+"/keyframes.css?xK7UBt9QOfgQHBL0uUC6z"],i=0;n.forEach((function(o){var r=document.createElement("link");r.rel="stylesheet",r.href=o,r.onload=function(){++i===n.length&&(1===e?t.render_frame():t.renderFrame())},t.document.head.appendChild(r)}))},ao.prototype.getZIndexForElement=function(t){switch(t){case"mainHolder":return this.DEFAULT_Z_INDEX+1;case"socialIFrame":return this.DEFAULT_Z_INDEX+2;case"livechat":return this.DEFAULT_Z_INDEX+3;default:return this.DEFAULT_Z_INDEX}},ao.prototype.renderFrame=function(){var t=this,e=this,n=e.getVersion(),i=this.server_host+"/buttons/v"+n+"/html/"+this.hash+".html?"+this.settings.date_update,o=this.document.createElement("iframe"),r={button:null,holder:null,link_holder:null,animation:this.getAnimation(),theme:this.settings.button.theme,size:parseInt(this.settings.button.size),position:this.makePositionParams(),orientation:parseInt(this.settings.button.orientation),is_fixed:"Y"===this.settings.button.fixed};r.holder=this.renderHolder(r),r.button=this.renderMainButton(r),this.buttonHolderEl=r.holder,this.setFrame(o,i,n,r),r.holder.insertBefore(o,r.holder.children[0]),r.link_holder=this.renderBrand(r),this.setOrientation(o,r),this.setBrandPosition(r),this.setPosition(r),this.displayAnimation(r),o.onload=function(){e.set_social(e.settings),e.initApiMeta(),tn.add({target:r.button,eventName:"click",handler:function(t){return t.stopPropagation(),e.onButtonClick(r),!1}}),e.forceButtonCollapse=function(){e.onButtonClick(r,{collapseSocials:!0})},e.addClicksListener()},this.initModal(r),this.initFormModal(r),this.initKeyActions(r),function(t){var e,n=void 0!==window.amoSocialButton?"amoSocialButton":"crmPlugin";window[n]=(e=t,(t=void 0===(t=(window[n]||{}).q)?[]:t).forEach((function(t){ze.apply(null,[e].concat(Array.prototype.slice.apply(t)))})),t.slice(0,0),ze.bind(null,e))}((function(e){switch(e){case"livechat":return t.livechat;case"keyactions":return t.keyactions;case"button":return{setupContactForHuman:t.setupContactForHuman.bind(t),destroy:t.destroy.bind(t)};default:return null}}))},ao.prototype.isOnlyOneButton=function(){var t=Object.keys(this.settings.social_services);return 1===t.length&&this.settings.social_services[t[0]].type||""},ao.prototype.getButtonColor=function(){return this.user_config.color||this.settings.button.color},ao.prototype.getButtonRadius=function(){return this.user_config.radius||this.settings.button.radius},ao.prototype.getAnimation=function(){return this.settings.button.animation?parseInt(this.settings.button.animation):0},ao.prototype.onButtonClick=function(t,e){var n,i,o,r=this;this.meta_params.inline&&this.is_not_first_click?this.onMessage({data:"click_button"}):(this.is_not_first_click=!0,e=e&&e.collapseSocials||!1,n=!t.button.classList.contains("amo-button--only-livechat"),i=this.getParamToNull(),o=function(t){return T(y(t).toLowerCase())}(i),this.collapsed?(this.collapsed=!1,n&&!e&&(this.soc_frame.elem[i]=this.soc_frame[i],this.soc_frame.elem.style["min"+o]=this.soc_frame[i]+"px"),t.button.classList.add("maincollapsed"),this.meta_params.inline?(this.setBackgroundColor(t.button,"transparent"),this.setBorderColor(t.button,"transparent")):(this.setBackgroundColor(t.button,"white"===t.theme?"#FFF":"#000"),this.setBorderColor(t.button,"white"===t.theme?this.getButtonColor():"#FFF")),this.setHolderPadding(t),t.link_holder.classList.add("collapsed"),this.hideAnimation(t.button),this.livechat&&(this.livechat.hideBubble(),n||this.livechat.show())):(this.collapsed=!0,t.button.classList.remove("maincollapsed"),t.link_holder.classList.remove("collapsed"),this.resetHolderPadding(t),this.livechat&&(this.livechat.hide(),this.livechat.isEnabled&&this.livechat.showBubble()),this.is_form_shown&&this.hideForm(),this.setBackgroundColor(t.button,this.getButtonColor()),this.setBorderColor(t.button,""),this.displayAnimation(t),setTimeout((function(){!0===r.collapsed&&(r.soc_frame.elem[i]=0,r.soc_frame.elem.style["min"+o]="0px")}),1e3)),this.soc_frame.elem.contentWindow.postMessage({method:"button:click",payload:{showSocials:!this.collapsed&&!e,isInline:this.meta_params.inline,buttonTheme:t.theme}},"*"))},ao.prototype.displayAnimation=function(t){var e="";switch(t.animation){case 0:return;case 1:e="amo_animation_waves";break;case 2:e="amo_animation_tremble";break;case 3:e="amo_animation_shake"}e&&(t.button.className+=" "+e)},ao.prototype.hideAnimation=function(t){t.className=t.className.replace(/\bamo_animation_[a-z]+\b/g,"")},ao.prototype.isMobileDevice=function(){return(0<window.innerWidth?window.innerWidth:screen.width)<640},ao.prototype.makePositionParams=function(){var t,e=this.isMobileDevice(),n=parseInt(this.settings.button.position)%2==0?"right":"left",i=2<parseInt(this.settings.button.position)?"bottom":"top";e=e?(t=this.settings.button.x_offset_m,this.settings.button.y_offset_m):(t=this.settings.button.x_offset,this.settings.button.y_offset);return{x:t,y:e,v:i,h:n}},ao.prototype.setBrandPosition=function(t){if(this.disable_titles=!1,2===t.orientation){if(t.position.y<24)return void(t.link_holder.style.display="none");"top"===t.position.v&&(t.link_holder.style.top="-20px"),"bottom"===t.position.v&&(t.link_holder.style.bottom="-18px")}else{if("bottom"===t.position.v&&t.position.y<24)return this.disable_titles=!0,void(t.link_holder.style.display="none");this.meta_params.inline&&(t.link_holder.style[t.position.h]=0),t.link_holder.style.bottom="-18px"}t.position.x<20&&t.link_holder.classList.add("amo-brand_to-"+t.position.h)},ao.prototype.renderHolder=function(t){var e=this.document.createElement("div"),n="livechat"===(i=this.isOnlyOneButton()),i=i&&!n?i:"";return e.className="amo-button-holder "+(2===t.orientation?"amo-vertical":"amo-horisontal"),e.style.position=t.is_fixed?"fixed":"absolute",e.innerHTML=['<div class="amo-button amo-button--main '+(n?"amo-button--only-livechat":"")+" "+(i?"amo-button--only-social":"")+' js-amo-button" id="amobutton" data-social="'+i+'" style="width: '+t.size+"px; height:"+t.size+"px; z-index: "+this.getZIndexForElement("livechat")+'">','<div class="amo-button--main-icon'+(this.meta_params.inline?" amo-button--no-fill":"")+'">',3===this.getVersion()?'<svg class="amo-button--close-icon" width="19" height="19" viewBox="0 0 19 19" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.33274 11.3695L2.46267 18.2395C1.89896 18.8032 0.98461 18.8057 0.42219 18.2433C-0.144151 17.677 -0.138549 16.7673 0.42597 16.2028L7.29603 9.33276L0.42597 2.46267C-0.137747 1.89896 -0.14023 0.984599 0.42219 0.422179C0.988531 -0.144162 1.89816 -0.138538 2.46267 0.425981L9.33274 7.29605L16.2028 0.425981C16.7666 -0.137736 17.6809 -0.140241 18.2433 0.422179C18.8097 0.98852 18.8041 1.89816 18.2395 2.46267L11.3694 9.33276L18.2395 16.2028C18.8033 16.7665 18.8057 17.6809 18.2433 18.2433C17.677 18.8097 16.7674 18.804 16.2028 18.2395L9.33274 11.3695Z" />/svg>':"","</div>","</div>"].join(""),t.is_fixed&&(e.style.zIndex=this.getZIndexForElement("mainHolder")),this.parent_node.appendChild(e),e},ao.prototype.renderMainButton=function(t){var e=t.holder.querySelector(".js-amo-button");return this.setBackgroundColor(e,this.getButtonColor()),this.setBorderRadius(e,this.getButtonRadius()),e.style.float=""===t.is_fixed?"left":t.position.h,this.user_config.hidden&&(e.style.display="none"),e},ao.prototype.setBackgroundColor=function(t,e){t.style.backgroundColor=e},ao.prototype.setBorderRadius=function(t,e){t.style.borderRadius=e+"px"},ao.prototype.setBorderColor=function(t,e){3===this.getVersion()&&(t.style.borderColor=e,t.style.fill=e)},ao.prototype.renderBrand=function(t){var e=this.document.createElement("div"),n=Ee(),i=this.langs[this.lang_id].made_by+" "+this.settings.brandName;return"es"===this.lang_id&&(n+="/es/"),e.className="amo-brand",e.id="amo_brand",e.style.width=t.size+(this.meta_params.inline?7:0)+"px",e.innerHTML='<p class="amo-brand__link-holder"><a target="_blank" href="'+n+'" class="amo-brand__link">'+i+"</a></p>",t.holder.appendChild(e),e},ao.prototype.setHolderPadding=function(t){if(!this.meta_params.inline&&2===t.orientation){var e=7+(t.size+10)*this.services_count+"px";switch(t.position.v){case"top":t.holder.style.paddingBottom=e;break;case"bottom":t.holder.style.paddingTop=e}}},ao.prototype.resetHolderPadding=function(t){if(2===t.orientation)switch(t.position.v){case"top":t.holder.style.paddingBottom="0px";break;case"bottom":t.holder.style.paddingTop="0px"}},ao.prototype.setOrientation=function(t,e){if(this.isOnlyOneButton())return t.style.top="7px",void(t.style.left="7px");if(2===e.orientation){var n=(this.meta_params.inline?-15:e.size-5)+"px",i=this.meta_params.inline?"-4px":0;switch(e.position.v){case"top":t.style.top=n,t.style.bottom="inherit","right"===e.position.h?(t.style.right=i,t.style.left="inherit"):(t.style.left=i,t.style.right="inherit");break;case"bottom":t.style.top="inherit",t.style.bottom=n,"right"===e.position.h?(t.style.right=i,t.style.left="inherit"):(t.style.left=i,t.style.right="inherit")}}else{switch("bottom"===e.position.v&&(t.style.top="auto",t.style.bottom=this.meta_params.inline?"-25px":"-20px"),e.position.v){case"bottom":t.style.top="auto",t.style.bottom=this.meta_params.inline?"-25px":"-20px";break;case"top":t.style.top=this.meta_params.inline&&"-4.5px"}var o=this.meta_params.inline?"-33px":e.size-15+"px";switch(e.position.h){case"left":t.style.left=o,t.style.right="inherit";break;case"right":t.style.left="inherit",t.style.right=o}}},ao.prototype.setPosition=function(t){if(t.holder.style[t.position.h]=t.position.x+"px",t.holder.style[t.position.v]=t.position.y+"px",this.meta_params.inline){var e,n=0;for(e in this.settings.social_services)"livechat"===this.settings.social_services[e].type&&(n=e);var i=t.holder.querySelector(".amo-button--main");i.style.pointerEvents="none",i.style.backgroundColor="transparent",1===t.orientation?i.style[t.position.h]=(t.size+4)*n-7+"px":i.style[t.position.v]=(t.size+4)*n-7+8+"px"}},ao.prototype.checkIfFormsNeeds=function(){0!==parseInt(this.settings.button.form)&&this.renderForms()},ao.prototype.renderForms=function(){var t=this.getFormData();this.insertForms(t)},ao.prototype.render_frame=function(){var t,e=this,n=e.settings.button.is_fixed,i=e.document.createElement("iframe"),o=e.document.createElement("div"),r=e.document.createElement("div"),s=e.server_host+"/buttons/html/"+e.hash+".html?"+e.settings.date_update,a=e.settings.button.button_position.split("-"),c=Ee();if("es"===e.lang_id&&(c+="/es/"),o.className="amo-button-holder "+(2===e.orientation?"amo-vertical":"amo-horisontal"),o.style.position=n?"fixed":"absolute",o.innerHTML='<div class="amo-button amo-button--main js-amo-button" id="amobutton" style="width:'+e.settings.button.button_size+"px; height:"+e.settings.button.button_size+'px"></div>',n&&(o.style.zIndex=parseInt(ti())),e.parent_node.appendChild(o),e.button_holder=o,t=o.querySelector(".js-amo-button"),e.settings.button.hasOwnProperty("color")&&(t.style.backgroundColor=e.settings.button.color),t.style.float=""===e.settings.button.is_fixed?"left":a[1],this.setFrame(i,s,1),o.insertBefore(i,o.children[0]),o.style.height=e.soc_frame.height+"px",2===this.orientation)switch(a[0]){case"top":o.style.paddingBottom=7+(e.settings.button.button_size+10)*e.services_count+"px";break;case"bottom":o.style.paddingTop=7+(e.settings.button.button_size+10)*e.services_count+"px"}r.className="amo-brand",r.id="amo_brand",e.brand_holder=r,1===e.orientation&&(r.style[n?a[1]:"left"]="7px"),r.innerHTML='<p class="amo-brand__link-holder" style="float: '+(n?a[1]:"left")+'">'+e.langs[e.lang_id].made_by+' <a target="_blank" href="'+c+'" class="amo-brand__link">amoCRM</a></p>',o.appendChild(r),2===e.orientation&&e.setVerticalBrandPos(a),"Y"===e.settings.button.is_fixed?(o.style[a[1]]=(""===e.settings.button.horisontal_position?0:e.settings.button.horisontal_position)+"px",o.style[a[0]]=(""===e.settings.button.vertical_position?0:e.settings.button.vertical_position)+"px","right"==a[1]&&i.setAttribute("style","right:0; left: inherit")):2===e.orientation&&(o.style.bottom=0),i.onload=function(){e.set_social(e.settings),e.initApiMeta(),tn.add({target:t,eventName:"click",handler:function(n){return n.stopPropagation(),e.onButtonClickV1(t,r),!1}}),e.checkIfFormsNeeds()}},ao.prototype.initApiMeta=function(){var t=this;if(t.meta_params.setMeta=function(e){var n=t.window.frames.social_iframe;"object"==typeof e&&Object.assign(t.bot_params,e.bot_params||{}),n.postMessage({method:"send_meta",payload:{metaData:e}},"*")},t.meta_params.params){for(var e in t.meta_params.params)t.meta_params.setMeta(t.meta_params.params[e]);delete t.meta_params.params}AMO_PIXEL_CLIENT.configure({baseURL:t.server_host,id:t.id,hash:t.hash});var n=AMO_PIXEL_CLIENT.extractTrackingParamsFromUrl();AMO_PIXEL_CLIENT.extractTrackingParamsFromTrackers((function(e){var i=[];e.forEach((function(t){0<t.length&&t.forEach((function(t){t.key&&t.value&&i.push({field_code:t.key.toUpperCase(),values:[{value:t.value}]})}))})),Object.keys(n).map((function(t,e){var o=n[t];i.push({field_code:t.toUpperCase(),values:[{value:o}]})})),0<i.length&&t.meta_params.setMeta({lead:{custom_fields_values:i}})}))},ao.prototype.onButtonClickV1=function(t,e){var n=this,i=this.getParamToNull();this.collapsed?(this.collapsed=!1,this.soc_frame.elem[i]=this.soc_frame[i],t.classList.add("maincollapsed"),e.classList.add("collapsed")):(this.collapsed=!0,t.classList.remove("maincollapsed"),e.classList.remove("collapsed"),this.is_form_shown&&this.hideForm(),setTimeout((function(){!0===n.collapsed&&(n.soc_frame.elem[i]=0)}),1e3)),this.soc_frame.elem.contentWindow.postMessage({method:"button:click",payload:{showSocials:!this.collapsed}},"*")},ao.prototype.getParamToNull=function(){return 1===parseInt(this.orientation)?"width":"height"},ao.prototype.setFrame=function(t,e,n,i){void 0===i&&(i={});var o=this.isOnlyOneButton();this.soc_frame={},this.soc_frame.elem=t,this.setSizes(n),n=this.langs[this.lang_id]["%brand% CRM Plugin social network list"];t.id="social_iframe",t.setAttribute("name","social_iframe"),t.setAttribute("title",n.replace("%brand%",this.settings.brandName)),t.src=e,t.scrolling="no",t.className="amo-button__iframe",o&&"livechat"!==o&&(t.style.opacity=0),i.is_fixed&&(t.style.zIndex=this.getZIndexForElement("socialIFrame"))},ao.prototype.isFirstSourceApple=function(){var t=Object.keys(this.settings.social_services).length;return this.settings.social_services[t-1].type===Be},ao.prototype.setSizes=function(t){var e=this.isOnlyOneButton();3===t&&e&&"livechat"!==e?this.setOnlySizes():(1===t?2===parseInt(this.orientation):2===parseInt(this.settings.button.orientation))?this.setVerticalSizes(t):this.setHorisontalSizes(t)},ao.prototype.setOnlySizes=function(){this.soc_frame.width=this.settings.button.size,this.soc_frame.height=this.settings.button.size,this.soc_frame.elem.width=this.settings.button.size,this.soc_frame.elem.height=this.settings.button.size},ao.prototype.setVerticalSizes=function(t){var e=this.services_count,n=this.meta_params.inline?this.settings.button.size+10:this.settings.button.size;1===t?(this.soc_frame.width=this.settings.button.button_size+14,this.soc_frame.height=this.settings.button.button_size+14+(this.settings.button.button_size+10)*e,this.soc_frame.elem.width=this.soc_frame.width):(this.soc_frame.width=n+100,this.soc_frame.height=(n-6)*e+40,this.soc_frame.elem.width=this.soc_frame.width,this.soc_frame.elem.style.minWidth=this.soc_frame.width+"px"),this.soc_frame.elem.height=0},ao.prototype.setHorisontalSizes=function(t){var e,n,i,o,r=this.services_count,s=this.makePositionParams(),a="bottom"===s.v?36:38,c=this.meta_params.inline?this.settings.button.size+4:this.settings.button.size-10+4;1===t?(this.soc_frame.width=this.settings.button.button_size+14+(this.settings.button.button_size+10)*r,this.soc_frame.height=this.settings.button.button_size+14+20,this.soc_frame.elem.width=0,this.soc_frame.elem.height=this.soc_frame.height):(3===t?(t=this.settings.button.size+4,this.meta_params.inline||(t-=10),i=this.isFirstSourceApple()?23:15,o=this.meta_params.inline?0:this.settings.button.size,o=window.innerWidth-s.x-o-29-i,e=Math.min(t*r+29+i,o),n=Math.floor(e/t),e===o&&(o=Math.floor((e+i)/t),e+=29,n===o&&(e+=i))):(e=Math.min((this.settings.button.size-6)*r+40,window.innerWidth-s.x-this.settings.button.size-15),this.meta_params.inline&&(e+=this.settings.button.size),n=Math.floor(e/this.settings.button.size)),this.soc_frame.width=e,this.soc_frame.height=Math.ceil(Object.keys(this.settings.social_services).length/n)*c+a,this.soc_frame.elem.width=0,this.soc_frame.elem.height=this.soc_frame.height,this.soc_frame.elem.style.minHeight=this.soc_frame.height+"px")},ao.prototype.set_social=function(t){var e=this;this.session_uid=AMO_PIXEL_CLIENT.getSessionUid(),this.session_id=AMO_PIXEL_CLIENT.getShortSessionId(),t.locale=this.locale,t.button.id=this.id,t.button.hash=this.hash,t.session_uid=this.session_uid,t.session_id=this.session_id,t.metadata=AMO_PIXEL_CLIENT.makeMetadata(),t.link=AMO_PIXEL_CLIENT.getTrackingLink(),t.disable_titles=this.disable_titles,t.isMobile=this.isMobileDevice(),this.window.frames.social_iframe.postMessage({method:"set_social",payload:{data:t}},"*"),this.socialFrameReady=!0,this.keyactionsAwaited.forEach((function(t){return e.sendCRMReactions(t)})),this.keyactionsAwaited=[]},ao.prototype.setVerticalBrandPos=function(t){var e=this.brand_holder,n=e.offsetWidth,i=t[1];t=t[0];if(e.style[t]="7px","bottom"===t)switch(i){case"left":e.style.left="-3px",e.className+=" amo-brand--bl";break;case"right":e.style.bottom="-10px",e.style.right="-"+(n+3)+"px",e.className+=" amo-brand--br"}else if("top"===t)switch(i){case"left":e.style.top="-10px",e.style.left="-"+(n+3)+"px",e.className+=" amo-brand--tl";break;case"right":e.style.right="-3px",e.className+=" amo-brand--tr"}},ao.prototype.insertForms=function(t){var e=document.createElement("script"),n=this.createFormWrapper();window.amo_forms_params=t||{},e.id="amoforms_script",e.src=this.forms_host,n.appendChild(e),this.addClicksListener()},ao.prototype.setupContactForHuman=function(t){(t=AMO_PIXEL_CLIENT.canSetupContactForHuman(t))&&this.window.frames.social_iframe.postMessage({method:"setup_contact_for_human",payload:{contactId:t}},"*")},ao.prototype.addClicksListener=function(){var t=this;tn.add({target:window,eventName:"message",handler:function(e){t.onMessage(e)}})},ao.prototype.onMessage=function(t){var e,n=this,i=t.data;try{i=JSON.parse(i)}catch(t){}switch(!0){case"click_button"===i:this.meta_params.inline?(n.livechat.hide(),document.querySelector(".amo-button--main").style.pointerEvents="none",this.window.frames.social_iframe.postMessage({method:"livechat:click"},"*")):document.getElementById("amobutton").click(),je("onChatHide"),this.soc_frame.elem.style.zIndex=this.getZIndexForElement("socialIFrame");break;case"livechat:show"===i:n.livechat.show(),this.meta_params.inline&&(e=document.querySelector(".amo-button--main"),this.setBorderColor(e,"white"===this.settings.button.theme?this.getButtonColor():"#FFF"),this.setBackgroundColor(e,this.settings.button.theme),e.querySelector(".amo-button--close-icon").style.display="block",e.style.pointerEvents=""),this.isMobileDevice()&&(this.soc_frame.elem.style.zIndex="");break;case"livechat:hide"===i:n.livechat.hide(),this.meta_params.inline&&(e=document.querySelector(".amo-button--main"),this.setBorderColor(e,"transparent"),this.setBackgroundColor(e,"transparent"),e.querySelector(".amo-button--close-icon").style.display="",e.style.pointerEvents="none");break;case"click_form"===i:n.showForm();break;case"pixel_ready"===i:n.initLivechat(),Fe=!0,Pe.forEach((function(t){return ze.apply(void 0,t)}));break;case!("object"!=typeof i||!i.func||"buttonClick"!==i.func||!i.service):je("onButtonClick",i.service,i.link);break;case 1===this.getVersion()&&!("object"!=typeof i||!i.func||"resizeForm"!==i.func||!i.height):n.resizeFormFrame(i.height)}},ao.prototype.resizeFormFrame=function(t){this.form_wrapper.style.height=t+"px",this.setFormPosition(t)},ao.prototype.showForm=function(){var t=this,e="amo-form-wrapper_shown";this.form_wrapper.classList?this.form_wrapper.classList.add(e):this.form_wrapper.className+=" "+e,t.is_form_shown=!0,tn.add({target:document,eventName:"click",handler:function(e){t.hideForm(e)}})},ao.prototype.hideForm=function(){var t="amo-form-wrapper_shown";this.form_wrapper.classList?this.form_wrapper.classList.remove(t):this.form_wrapper.className=this.form_wrapper.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "),this.is_form_shown&&(this.is_form_shown=!1)},ao.prototype.getFormData=function(){var t,e=this.settings.social_services,n={};for(t in e)if("form"===e[t].type){n={id:e[t].id,hash:e[t].link,locale:this.locale,type:"gso"};break}return n},ao.prototype.createFormWrapper=function(){var t=document.createElement("div");return t.style.width="306px",t.style.height="500px",t.className="amo-form-wrapper",this.form_wrapper=t,this.button_holder.appendChild(t),t},ao.prototype.setFormPosition=function(t){var e=this,n=e.settings.button.button_position.split("-");2===e.orientation?(e.form_wrapper.style[n[1]]=e.soc_frame.width+10+"px",e.form_wrapper.style[n[0]]=0):1===e.orientation&&(e.form_wrapper.style[n[0]]=e.soc_frame.height+10+"px",e.form_wrapper.style[n[1]]=0)},ao.prototype.initModal=function(t){this.modal=new Qn({container:t.holder,brandName:this.settings.brandName,host:this.server_host})},ao.prototype.initFormModal=function(t){this.form_modal=new an({amoforms_url:this.forms_host,button_holder:t.holder})},ao.prototype.initKeyActions=function(t){var e=this;void 0===t&&(t={}),this.keyactions=new $n({keyactions:this.settings.keyactions,sendCRMReactions:function(t){return e.sendCRMReactions(t)},showForm:function(t,n){return e.form_modal.show({id:t,hash:n})},showGreeting:function(){e.livechat?e.livechat.showGreeting():e.greetingAwaited=!0},showAnimation:function(n){e.collapsed&&(e.hideAnimation(t.button),e.displayAnimation({animation:n,button:t.button}),setTimeout((function(){e.hideAnimation(t.button),e.displayAnimation({animation:e.getAnimation(),button:t.button})}),2e3))}})},ao.prototype.sendCRMReactions=function(t){this.socialFrameReady?this.window.frames.social_iframe.postMessage({method:"send_keyaction",payload:{keyaction_id:t}},"*"):this.keyactionsAwaited.push(t)},ao.prototype.initLivechat=function(){var t,e=this,n=this;if(!this.livechat&&3===this.getVersion()){var i=document.getElementById("amobutton"),o={};for(t in this.settings.social_services){var r=this.settings.social_services[t];"livechat"===r.type&&(o=r)}this.livechat=new Jn({config:this.user_config.onlinechat||{},host:this.server_host,socket_url:o.link,session_uid:this.session_uid,session_id:this.session_id,container:i,enabled:o.id,account_name:o.account_name,position:this.makePositionParams(),orientation:2===parseInt(this.settings.button.orientation)?"vertical":"horizontal",button:{id:this.settings.button.id,hash:this.settings.button.hash,color:this.getButtonColor()},locale:this.lang_id,greeting:this.settings.greeting,greeting_bot_params:this.bot_params,has_keyactions:0<Object.keys(this.settings.keyactions).length,has_greeting_reaction:0<Object.keys(this.settings.keyactions).filter((function(t){return e.settings.keyactions[t].reactions&&0<Object.keys(e.settings.keyactions[t].reactions).filter((function(n){return"amobutton_greeting"===e.settings.keyactions[t].reactions[n].action})).length})).length,modal:this.modal,forceButtonCollapse:!this.meta_params.inline&&this.forceButtonCollapse,isButtonOpened:function(){return!n.collapsed},isInline:this.meta_params.inline,isCopyrightVisible:!1!==this.settings.is_copyright_visible,servicesCount:this.services_count,serviceSize:this.settings.button.size-10,brandName:this.settings.brandName,onIframeLoaded:function(){n.meta_params.inline&&1<this.services_count?i.click():i.style.opacity="1"}.bind(this)}),this.greetingAwaited&&this.livechat.showGreeting()}},ao.prototype.destroy=function(){tn.removeAll(),tn.stop(),this.buttonHolderEl&&this.buttonHolderEl.remove(),this.livechat&&this.livechat.destroy(),window.AMO_PIXEL_CLIENT&&window.AMO_PIXEL_CLIENT.destroy(),window.AMOPIXEL_IDENTIFIER&&window.AMOPIXEL_IDENTIFIER.destroy(),["amoSocialButton","crmPlugin","amo_social_button","crm_plugin","amoSocialButtonConfig","crmPluginConfig"].forEach((function(t){try{delete window[t]||(window[t]=void 0)}catch(e){window[t]=void 0}}))},new ao(window.amo_social_button||window.crm_plugin||{})}();